function dotSlideMenu () {
	if ($(".dot-menu").hasClass("active") === true) {
		$(".dot-menu").removeClass("active");
		$(".right-menu").hide();
	} else {
		$(".dot-menu").addClass("active");
		$(".right-menu").show();
	}
}

$.setMobileNav.firstCover();

function paymentConfig (orderGroup, status, shopping_url) {
	var listHtml = '',
		payHtml = '',
		deliveryHtml = '',
		buyrHtml = '',
		total = 0,
		noneTotal = 0,
		deliverySection = '',
		requestsHtml = '',
		shoppingUrl = '/shopping',
		noneSale = 0,
		checkExchange = 'N';

	var location = window.location.href, st = '', typeCheck = '';
	if (location.indexOf('order_d') != -1) {
		st = 'S';
		typeCheck = 'D';
	}
	if (location.indexOf('order_f') != -1) {
		st = 'S';
		typeCheck = 'F';
	}
	if (location.indexOf('order') != -1) st = 'S';
	if (location.indexOf('_admin') != -1) shoppingUrl = '/_admin/shopping';
	if (location.indexOf('cancel') != -1) typeCheck = 'C';
	$('#delivery-box').empty();
	var total_price = 0, noneTotalPrice = 0;
	$.ajax({
		url: shopping_url+'/payment_info',
		type: 'post',
		dataType: 'json',
		data: {
			'order_group': orderGroup,
			'status': st,
		},
		success: function (data) {
			var statusCheck = '';
			var typeAry = ['normal', 'download', 'etc'];
			var koreanType = ['일반상품', '다운로드 상품', '기타 무형상품'];
			var totalCnt = 0;
			var returnPrice = 0, returnCnt = 0, returnRequestPrice = 0, returnRequestCnt = 0;
			var lastReturn = '', lastReturnRequest = '';
			var styleType = ['CY', 'RY', 'EY'];
			var escrowState = 'N';
			var allPrice = 0;
			var realPrice = 0;

			var allcheckHtml = '\
				<div class="newcheckbox hand">\
					<label>\
						<input type="checkbox" id="product-all-check">\
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
							<path d="M13 0H3C1.3 0 0 1.3 0 3v10c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3V3C16 1.3 14.7 0 13 0zM15 13c0 1.1-0.9 2-2 2H3c-1.1 0-2-0.9-2-2V3c0-1.1 0.9-2 2-2h10c1.1 0 2 0.9 2 2V13z"/>\
						</svg>\
						<svg class="active" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
							<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0zM13.03 6.03l-5.5 5.5C7.38 11.68 7.19 11.75 7 11.75s-0.38-0.07-0.53-0.22l-3.5-3.5c-0.29-0.29-0.29-0.77 0-1.06s0.77-0.29 1.06 0L7 9.94l4.97-4.97c0.29-0.29 0.77-0.29 1.06 0S13.32 5.74 13.03 6.03z"/>\
						</svg>\
					</label>\
				</div>\
			';
					
			$('.payment-table-header .newcheckbox').remove();
			$('.payment-table-header').prepend(allcheckHtml);

			for (var q=0;q<typeAry.length;q++) {
				if (!data['list'][typeAry[q]]) continue;
				
				if (q == 0) {
					escrowState = data['list'][typeAry[q]][0]['escrow_state'];
					listHtml += '<input type="hidden" id="escrow" value="'+escrowState+'">';
				}
				if (data['list'][typeAry[q]][0]['escrow_state'] == 'Y') {
					if (q == 0) listHtml += '<input type="hidden" id="escrow-tno" value="'+data['info']['kcp_number']+'">';
					if (q == 0) listHtml += '<input type="hidden" id="order_group" value="'+data['info']['order_group']+'">';
					if (q == 0) listHtml += '<input type="hidden" id="d-status" value="'+data['list'][typeAry[q]][0]['d_status']+'">';
				}
				console.log(data['list'][typeAry[q]]);
				if (location.indexOf('order_f') != -1) {
					if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'download' || typeAry[q] == 'etc')) listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else if (location.indexOf('order_df') != -1) {
					if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'normal' || typeAry[q] == 'etc')) listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else if (location.indexOf('order_ef') != -1) {
					if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'normal' || typeAry[q] == 'download')) listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else if (location.indexOf('order_d') != -1) {
					if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'download' || typeAry[q] == 'etc')) listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else if (location.indexOf('return') != -1) {
					typeCheck = 'R';
					if (typeAry[q] == 'download' || typeAry[q] == 'etc') listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else if (location.indexOf('exchange') != -1) {
					if (typeAry[q] == 'download' || typeAry[q] == 'etc') listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else if (location.indexOf('order') != -1) {
					if (data['list'][typeAry[q]][0]['status'] == 'F' && (typeAry[q] == 'download' || typeAry[q] == 'etc')) listHtml += '<div style="opacity:.3;">';
					else listHtml += '<div>';
				} else {
					listHtml += '<div>';
				}
				var isdisCancel = (location.indexOf('_f') != -1) ? 'f' : '';
				if(location.indexOf('order_f') != -1) isdisCancel = '';

				var datalist = Object.keys(data.list).map(function (key) { 
						        return [String(key), data.list[key]]; 
						    }),
					detailTitleHtml = (datalist.length > 1) ? '<h3 class="detail-title">'+koreanType[q]+'</h3>' : '';
					
				listHtml += '<div class="detail-title-box" data-status="'+isdisCancel+'">'+detailTitleHtml+'</div>';
				for (var i=0;i<data['list'][typeAry[q]].length;i++) {
					totalCnt++;
					var dataSet = data['list'][typeAry[q]][i];
					var option_ary = '';
					var total_price = 0;
					var total_count = 0;
					var isdisabled = '';
					var cancel_price = 0;

					if (location.indexOf('order_f') != -1) {
						if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'download' || typeAry[q] == 'etc')) isdisabled = 'disabled';
					} else if (location.indexOf('order_df') != -1) {
						if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'normal' || typeAry[q] == 'etc')) isdisabled = 'disabled';
					} else if (location.indexOf('order_ef') != -1) {
						if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'normal' || typeAry[q] == 'download')) isdisabled = 'disabled';
					} else if (location.indexOf('order_d') != -1) {
						if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'download' || typeAry[q] == 'etc')) isdisabled = 'disabled';
					} else if (location.indexOf('order') != -1) {
						if ((data['list'][typeAry[q]][0]['status'] == 'F' || data['list'][typeAry[q]][0]['status'] == 'S' || data['list'][typeAry[q]][0]['status'] == 'E') && (typeAry[q] == 'download' || typeAry[q] == 'etc')) isdisabled = 'disabled';
					}

					listHtml += '<div class="detail-listbox">';
					
					if (location.indexOf('cancel') != -1) {
						if (dataSet['d_status'] == 'C') listHtml += '\
							<div class="newcheckbox hand">\
								<label>\
									<input type="checkbox" class="status-checkbox" name="order_number" value="'+dataSet['order_number']+'">\
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.3 0 0 1.3 0 3v10c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3V3C16 1.3 14.7 0 13 0zM15 13c0 1.1-0.9 2-2 2H3c-1.1 0-2-0.9-2-2V3c0-1.1 0.9-2 2-2h10c1.1 0 2 0.9 2 2V13z"/>\
									</svg>\
									<svg class="active" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0zM13.03 6.03l-5.5 5.5C7.38 11.68 7.19 11.75 7 11.75s-0.38-0.07-0.53-0.22l-3.5-3.5c-0.29-0.29-0.29-0.77 0-1.06s0.77-0.29 1.06 0L7 9.94l4.97-4.97c0.29-0.29 0.77-0.29 1.06 0S13.32 5.74 13.03 6.03z"/>\
									</svg>\
								</label>\
								';
						else  listHtml += '\
							<div class="newcheckbox" data-status="'+isdisCancel+'">\
								<label>\
									<input type="checkbox" name="order_number" disabled style="display:none;" value="'+dataSet['order_number']+'">\
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
										<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0z"/>\
									</svg>\
								</label>\
							';
					} else if (location.indexOf('exchange') != -1) {
						if (dataSet['d_status'] == 'E' || dataSet['d_status'] == 'EW') listHtml += '\
							<div class="newcheckbox hand">\
								<label>\
									<input type="checkbox" class="status-checkbox" name="order_number" value="'+dataSet['order_number']+'">\
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.3 0 0 1.3 0 3v10c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3V3C16 1.3 14.7 0 13 0zM15 13c0 1.1-0.9 2-2 2H3c-1.1 0-2-0.9-2-2V3c0-1.1 0.9-2 2-2h10c1.1 0 2 0.9 2 2V13z"/>\
									</svg>\
									<svg class="active" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0zM13.03 6.03l-5.5 5.5C7.38 11.68 7.19 11.75 7 11.75s-0.38-0.07-0.53-0.22l-3.5-3.5c-0.29-0.29-0.29-0.77 0-1.06s0.77-0.29 1.06 0L7 9.94l4.97-4.97c0.29-0.29 0.77-0.29 1.06 0S13.32 5.74 13.03 6.03z"/>\
									</svg>\
								</label>\
								';
						else  listHtml += '\
							<div class="newcheckbox" data-status="'+isdisCancel+'">\
								<label>\
									<input type="checkbox" name="order_number" disabled style="display:none;" value="'+dataSet['order_number']+'">\
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
										<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0z"/>\
									</svg>\
								</label>\
							';
					} else if (location.indexOf('return') != -1) {
						if (dataSet['d_status'] == 'R' || dataSet['d_status'] == 'RW') listHtml += '\
							<div class="newcheckbox hand">\
								<label>\
									<input type="checkbox" class="status-checkbox" name="order_number" value="'+dataSet['order_number']+'">\
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.3 0 0 1.3 0 3v10c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3V3C16 1.3 14.7 0 13 0zM15 13c0 1.1-0.9 2-2 2H3c-1.1 0-2-0.9-2-2V3c0-1.1 0.9-2 2-2h10c1.1 0 2 0.9 2 2V13z"/>\
									</svg>\
									<svg class="active" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0zM13.03 6.03l-5.5 5.5C7.38 11.68 7.19 11.75 7 11.75s-0.38-0.07-0.53-0.22l-3.5-3.5c-0.29-0.29-0.29-0.77 0-1.06s0.77-0.29 1.06 0L7 9.94l4.97-4.97c0.29-0.29 0.77-0.29 1.06 0S13.32 5.74 13.03 6.03z"/>\
									</svg>\
								</label>\
								';
						else  listHtml += '\
							<div class="newcheckbox" data-status="'+isdisCancel+'">\
							<label>\
								<input type="checkbox" name="order_number" disabled style="display:none;" value="'+dataSet['order_number']+'">\
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
									<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0z"/>\
								</svg>\
							</label>\
							';
					} else {
						if (dataSet['d_status'] == 'C' || dataSet['d_status'] == 'CY' || dataSet['d_status'] == 'R' ||
							dataSet['d_status'] == 'RW' || dataSet['d_status'] == 'RD' || dataSet['d_status'] == 'RN' ||
							dataSet['d_status'] == 'RY' || dataSet['d_status'] == 'E' || dataSet['d_status'] == 'EW' || 
							dataSet['d_status'] == 'ED' || dataSet['d_status'] == 'EN' || dataSet['d_status'] == 'EY' || 
							((location.indexOf('order_df') != -1) && dataSet['product_state'] !== 'download') || 
							((location.indexOf('order_ef') != -1) && dataSet['product_state'] !== 'etc')) {
							listHtml += '<div class="newcheckbox">\
									<label>\
										<input type="checkbox" name="order_number" disabled>\
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
											<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0z"/>\
										</svg>\
									</label>\
									';
						} else {
							listHtml += '\
							<div class="newcheckbox">\
								<label>\
									<input type="checkbox" class="status-checkbox" name="order_number" '+isdisabled +' value="'+dataSet['order_number']+'">\
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
										<path d="M13 0H3C1.3 0 0 1.3 0 3v10c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3V3C16 1.3 14.7 0 13 0zM15 13c0 1.1-0.9 2-2 2H3c-1.1 0-2-0.9-2-2V3c0-1.1 0.9-2 2-2h10c1.1 0 2 0.9 2 2V13z"/>\
									</svg>\
									<svg class="active" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">\
										<path d="M13 0H3C1.34 0 0 1.34 0 3v10c0 1.66 1.34 3 3 3h10c1.66 0 3-1.34 3-3V3C16 1.34 14.66 0 13 0zM13.03 6.03l-5.5 5.5C7.38 11.68 7.19 11.75 7 11.75s-0.38-0.07-0.53-0.22l-3.5-3.5c-0.29-0.29-0.29-0.77 0-1.06s0.77-0.29 1.06 0L7 9.94l4.97-4.97c0.29-0.29 0.77-0.29 1.06 0S13.32 5.74 13.03 6.03z"/>\
									</svg>\
								</label>\
								';
						}
					}

					for (var j=0;j<dataSet['option_list'].length;j++) {
						if (j == (dataSet['option_list'].length - 1)) {
							if (dataSet['option_list'][j]['option_name'] != 'noneOption') option_ary += dataSet['option_list'][j]['option_name'];
						} else {
							if (dataSet['option_list'][j]['option_name'] != 'noneOption') option_ary += dataSet['option_list'][j]['option_name'] + " / ";
						}

						if (dataSet['option_list'][j]['sale_price'] != 0 || dataSet['option_list'][j]['sale_price'] != '0') {
							noneTotalPrice = (dataSet['option_list'][j]['sale_price'] * 1) * (dataSet['option_list'][j]['quantity'] * 1);
							total_price = (dataSet['option_list'][j]['price'] * 1) * (dataSet['option_list'][j]['quantity'] * 1);
						} else {
							noneTotalPrice = (dataSet['option_list'][j]['price'] * 1) * (dataSet['option_list'][j]['quantity'] * 1);
							total_price = (dataSet['option_list'][j]['price'] * 1) * (dataSet['option_list'][j]['quantity'] * 1);
						}
						total_count += (dataSet['option_list'][j]['quantity'] * 1);
						allPrice += noneTotalPrice;
						realPrice += total_price;
					}

					listHtml += '</div>';
					listHtml += '<div><img src="'+dataSet['product_image']+'"></div>';
					listHtml += '<div class="text-center">';
					listHtml += '<p class="product-name">'+dataSet['product_name']+'</p>';
					listHtml += '<p class="option-name optionPc">';
					listHtml += option_ary+'</p>';
					listHtml += '</div>';
					listHtml += '<div class="prTotalCount">'+number_format(total_count)+'</div>';
					listHtml += '<div class="prTotalPricePc">'+number_format(total_price)+'원</div>';
					listHtml += '<div class="detail-mobile-wrap">';
					listHtml += '<div class="option-name optionMobile"><p>';
					listHtml += option_ary+'</p><div class="line"></div><span>'+number_format(total_count)+' 개</span>';
					listHtml += '<p class="prTotalPriceMobile">'+number_format(total_price)+'원</p>';
					listHtml += '</div>';
					listHtml += '</div>';
					listHtml += '</div>';

					if (typeAry[q] == 'download') {
						if (dataSet['download_file'] != undefined) {
							listHtml += '<div class="admin-status-box"><div></div><div></div><div class="subcontents-box">';
							listHtml += '<p>다운로드 목록 : '+dataSet['download_file']['file_name']+'</p>';
							listHtml += '<p>다운로드 잔여 횟수 / 총 횟수 : '+dataSet['download_count']+'회 / '+dataSet['download_real_count']+'회</p>';
							listHtml += '<p>다운로드 기간 : '+dataSet['download_date']+'</p>';
							listHtml += '</div></div>';
						} else {
							listHtml += '<div class="admin-status-box"><div></div><div></div><div class="subcontents-box">';
							listHtml += '<p>다운로드 파일이 삭제되었습니다</p>';
							listHtml += '</div></div>';
						}
					}

					if (typeAry[q] == 'etc') {
						if (dataSet['etc_info']) {
							var etcInfoAry = dataSet['etc_info'].split('||');
							var etcInfo = '';

							if (etcInfoAry.length > 1) etcInfo = etcInfoAry[0]+' ~ '+etcInfoAry[1];
							else etcInfo = etcInfoAry;
							listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
							listHtml += '<p>선택일자 : '+etcInfo+'</p>';
							listHtml += '</div></div>';
						}
					}

					if (dataSet['d_status'] == 'C') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						listHtml += '<div class="admin-status-box"><div></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">취소요청중</span></p><br>';
						listHtml += '<p class="c-red">취소사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						returnRequestPrice += total_price;
						returnRequestCnt++;
					} else if (dataSet['d_status'] == 'CY') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">취소완료</span><br>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						listHtml += '<p class="c-red">취소사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						returnPrice += total_price;
						returnCnt++;
					} else if (dataSet['d_status'] == 'CN') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">취소거부</span><br><br>';
						listHtml += '<p class="c-red">취소거부 사유:'+dataSet['reason']['admin_msg']+'</p><br>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br><br>';
						listHtml += '<p class="c-red">취소사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
					} else if (dataSet['d_status'] == 'R') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");
						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">반품요청중</span></p>';
						listHtml += '<p class="c-red">반품사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						returnRequestPrice += total_price;
						returnRequestCnt++;
					} else if (dataSet['d_status'] == 'RW') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
						rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
						rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");

						listHtml += '<div class="admin-status-box"><div></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">반품요청중</span></p>';
						listHtml += '<br><p class="c-red">반품보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
						listHtml += '<p class="c-red">반품보류 상세사유:'+rHoldMsg+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';

						var reasonImageAry = dataSet['reason']['reason_image'].split("||");
						if (reasonImageAry[0]) {
							listHtml += '<div class="reason-image">';
							for (var imgCnt=0;imgCnt<reasonImageAry.length;imgCnt++) {
								listHtml += '<a href="'+reasonImageAry[imgCnt]+'" target="_blank">';
								listHtml += '<img src="'+reasonImageAry[imgCnt]+'">';
								listHtml += '</a>';
							}
							listHtml += '</div><br>';
						}

						listHtml += '<p class="c-red">반품사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
					} else if (dataSet['d_status'] == 'RD') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						if (dataSet['reason']['hold_msg']) {
							var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");
						}

						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">반품거부 재발송</span></p><br>';
						listHtml += '<p class="c-red">반품거부사유:'+dataSet['reason']['admin_msg']+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						if (dataSet['reason']['hold_msg']) {
							listHtml += '<br><p class="c-red">반품보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
							listHtml += '<p class="c-red">반품보류 상세사유:'+rHoldMsg+'</p>';
							listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';
						}
						listHtml += '<p class="c-red">반품사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
					} else if (dataSet['d_status'] == 'RN') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						if (dataSet['reason']['hold_msg']) {
							var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");
						}

						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">반품거부</span></p><br>';
						listHtml += '<p class="c-red">반품거부사유:'+dataSet['reason']['admin_msg']+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						if (dataSet['reason']['hold_msg']) {
							listHtml += '<br><p class="c-red">반품보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
							listHtml += '<p class="c-red">반품보류 상세사유:'+rHoldMsg+'</p>';
							listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';
						}
						listHtml += '<p class="c-red">반품사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
					} else if (dataSet['d_status'] == 'RY') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						if (dataSet['reason']['hold_msg']) {
							var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");
						}

						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">반품완료</span></p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						if (dataSet['reason']['hold_msg']) {
							listHtml += '<br><p class="c-red">반품보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
							listHtml += '<p class="c-red">반품보류 상세사유:'+rHoldMsg+'</p>';
							listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';
						}
						listHtml += '<p class="c-red">반품사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						returnPrice += total_price;
						returnCnt++;
					} else if (dataSet['d_status'] == 'E') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");
						listHtml += '<div class="admin-status-box"><div></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">교환요청중</span></p>';
						listHtml += '<p class="c-red">교환사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						checkExchange = 'Y';
					} else if (dataSet['d_status'] == 'EW') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
						rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
						rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");

						listHtml += '<div class="admin-status-box"><div></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">교환요청중</span></p>';
						listHtml += '<br><p class="c-red">교환보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
						listHtml += '<p class="c-red">교환보류 상세사유:'+rHoldMsg+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';

						var reasonImageAry = dataSet['reason']['reason_image'].split("||");
						if (reasonImageAry[0]) {
							listHtml += '<div class="reason-image">';
							for (var imgCnt=0;imgCnt<reasonImageAry.length;imgCnt++) {
								listHtml += '<a href="'+reasonImageAry[imgCnt]+'" target="_blank">';
								listHtml += '<img src="'+reasonImageAry[imgCnt]+'">';
								listHtml += '</a>';
							}
							listHtml += '</div><br>';
						}

						listHtml += '<p class="c-red">교환사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						checkExchange = 'Y';
					} else if (dataSet['d_status'] == 'ED') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						if (dataSet['reason']['hold_msg']) {
							var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");
						}

						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">교환거부 재발송</span></p><br>';
						listHtml += '<p class="c-red">교환거부사유:'+dataSet['reason']['admin_msg']+'</p><br>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						if (dataSet['reason']['hold_msg']) {
							listHtml += '<br><p class="c-red">교환보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
							listHtml += '<p class="c-red">교환보류 상세사유:'+rHoldMsg+'</p>';
							listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';
						}
						listHtml += '<p class="c-red">교환사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						checkExchange = 'Y';
					} else if (dataSet['d_status'] == 'EN') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						if (dataSet['reason']['hold_msg']) {
							var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");
						}
						
						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">교환거부</span></p><br>';
						listHtml += '<p class="c-red">교환거부사유:'+dataSet['reason']['admin_msg']+'</p><br>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						if (dataSet['reason']['hold_msg']) {
							listHtml += '<br><p class="c-red">교환보류사유:'+dataSet['reason']['hold_reason']+'</p>';
							listHtml += '<p class="c-red">교환보류 상세사유:'+rHoldMsg+'</p>';
							listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';
						}
						listHtml += '<p class="c-red">교환사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						checkExchange = 'Y';
					} else if (dataSet['d_status'] == 'EY') {
						var rRequests = dataSet['reason']['r_requests'].replace(/\r\n/g, "<br>");
						rRequests = rRequests.replace(/\n/g, "<br>");
						rRequests = rRequests.replace(/\r/g, "<br>");

						if (dataSet['reason']['hold_msg']) {
							var rHoldMsg = dataSet['reason']['hold_msg'].replace(/\r\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\n/g, "<br>");
							rHoldMsg = rHoldMsg.replace(/\r/g, "<br>");
						}
						
						listHtml += '<div class="admin-status-box"><div class="newcheckbox" data-status="'+isdisCancel+'"></div><div></div><div class="subcontents-box">';
						listHtml += '<p><span class="c-red">교환 재발송</span></p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reg_date']+'</p><br>';
						if (dataSet['reason']['hold_msg']) {
							listHtml += '<br><p class="c-red">교환보류사유 : '+dataSet['reason']['hold_reason']+'</p>';
							listHtml += '<p class="c-red">교환보류 상세사유:'+rHoldMsg+'</p>';
							listHtml += '<p class="c-red">'+dataSet['reason']['hold_date']+'</p><br>';
						}
						listHtml += '<p class="c-red">교환사유:'+dataSet['reason']['r_reason']+'</p>';
						listHtml += '<p class="c-red">상세사유:'+rRequests+'</p>';
						listHtml += '<p class="c-red">'+dataSet['reason']['reason_date']+'</p>';
						listHtml += '</div><div></div><div></div></div>';
						checkExchange = 'Y';
					}

					if (dataSet['reason']) {
						if (lastReturnRequest == '') {
							lastReturnRequest = dataSet['reason']['reason_date'];
						} else if (lastReturnRequest < dataSet['reason']['reason_date']) {
							lastReturnRequest = dataSet['reason']['reason_date'];
						}
					}

					if (dataSet['reason']) {
						if (lastReturn == '') {
							lastReturn = dataSet['reason']['reg_date'];
						} else if (lastReturn < dataSet['reason']['reg_date']) {
							lastReturn = dataSet['reason']['reg_date'];
						}
					}

					total += (total_price*1);
					noneTotal += (noneTotalPrice*1);
					statusCheck = dataSet['status'];
				}
				listHtml += '</div>';
			}

			var checkMsg = (!data['admin_msg'].length) ? 'msgFalse' : '',
				adminMemoHtml = '\
					<div class="admin-order-delivery-info">\
						<div class="info-subject">관리자 메모</div>\
						<div id="admin-memo" data-orderGroup="'+orderGroup+'">메모 추가</div>\
						<div id="admin-memo-list" class="'+checkMsg+'">'
						if (data['admin_msg'] != undefined) {
		 					for (var a=0;a<data['admin_msg'].length;a++) {
								adminMemoHtml += '<div class="admin-memo-list-box">\
									<div class="memo-box">\
										<div class="memo-btn" data-orderGroup="'+orderGroup+'" data-adminIdx="'+data['admin_msg'][a]['seq']+'">\
											<span class="memo-edit">\
												<svg viewBox="0 0 13 13" width="13" height="13">\
													<path fill="#96989b" d="M4.32 8.05C4.2 8.39 4.46 8.71 4.79 8.71c0.05 0 0.11-0.01 0.16-0.03L7 8l6-6 -2-2L5 6 4.32 8.05zM5.87 6.54L11 1.41 11.59 2 6.46 7.13 5.58 7.42 5.87 6.54z"/>\
													<path fill="#96989b" d="M9 11c0 0.55-0.45 1-1 1H2c-0.55 0-1-0.45-1-1V4c0-0.55 0.45-1 1-1h3V2H2C0.9 2 0 2.9 0 4v7c0 1.1 0.9 2 2 2h6c1.1 0 2-0.9 2-2V8H9V11z"/>\
												</svg>\
											</span>\
											<span class="memo-delete">\
												<svg viewBox="0 0 12 13" width="12" height="13">\
													<path fill="#96989b" d="M12 2h-1H9V0H3.02v2H1 0v1h1v8c0 1.1 0.9 2 2 2h6c1.1 0 2-0.9 2-2V3h1V2zM4.02 1H8v1H4.02V1zM10 11c0 0.55-0.45 1-1 1H3c-0.55 0-1-0.45-1-1V3h1.02H9h1V11z"/>\
													<rect fill="#96989b" x="4" y="4" width="1" height="7"/>\
													<rect fill="#96989b" x="7" y="4" width="1" height="7"/>\
												</svg>\
											</span>\
										</div>\
										<div class="memo-date">'+data['admin_msg'][a]['reg_date']+'</div>\
										<div class="memo-text"><pre>'+data['admin_msg'][a]['msg']+'</pre></div>\
									</div>\
								</div>';
							}
						}
					
					adminMemoHtml += '</div>\
					</div>\
					';
		
			$("#delivery-box").append(adminMemoHtml);

			var returnHtml = '';
			if (returnRequestPrice > 0 || returnPrice > 0) {
				var returnData = (data['info']['return_bank_data']) ? data['info']['return_bank_data'].split('||') : '';
				returnData[1] = returnData[1] ? returnData[1] : '환불 정보가 없습니다.';
				returnData[2] = returnData[2] ? returnData[2] : '';
				returnData[3] = returnData[3] ? returnData[3] : '';

				returnHtml += '<div class="admin-order-delivery-info">';
				returnHtml += '<div class="info-subject">환불정보</div>';
				returnHtml += '<div class="info-body">';
				if (returnRequestPrice > 0) {
					returnHtml += '<p><span class="f-left info-title">환불요청 상품금액</span><span class="info-text ta-right">'+number_format(data['cancel']['request'])+'원</span></p>';
					returnHtml += '<p><span class="f-left info-title">배송비</span><span class="info-text ta-right">'+number_format(data['cancel']['delivery'])+'원</span></p>';
					if(parseInt(data['point']['use_point']) < 0) 
						returnHtml += '<p><span class="f-left info-title">적립금 환불</span><span class="info-text ta-right">'+number_format(data['cancel']['point'])+'원</span></p>';
					returnHtml += '<p><span class="f-left info-title">총 환불요청 금액</span><span class="info-text ta-right">'+number_format(data['cancel']['total'])+'원</span></p>';
					returnHtml += '<p><span class="f-left info-title">환불요청일자</span><span class="info-text ta-right">'+lastReturnRequest+'</span></p>';
					if (data['info']['class'] == '무통장 입금' || returnPrice > 0) returnHtml += '<p class="cut-line"></p>';
				}
				if (returnPrice > 0) {
					returnHtml += '<p><span class="f-left info-title">환불완료 상품금액</span><span class="info-text ta-right">'+number_format(data['return']['request'])+'원</span></p>';
					returnHtml += '<p><span class="f-left info-title">배송비</span><span class="info-text ta-right">'+number_format(data['return']['delivery'])+'원</span></p>';
					if(parseInt(data['point']['use_point']) < 0) 
						returnHtml += '<p><span class="f-left info-title">적립금 환불</span><span class="info-text ta-right">'+number_format(data['return']['point'])+'원</span></p>';
					returnHtml += '<p><span class="f-left info-title">총 환불완료 금액</span><span class="info-text ta-right">'+number_format(data['return']['total'])+'원</span></p>';
					returnHtml += '<p><span class="f-left info-title">환불일자</span><span class="info-text ta-right">'+lastReturn+'</span></p>';
					if (data['info']['class'] == '무통장 입금') returnHtml += '<p class="cut-line"></p>';
				}
				if (data['info']['class'] == '무통장 입금') {
					returnHtml += '<p><span class="f-left info-title">환불방법</span><span class="info-text ta-right">환불계좌이체</span></p>';
					returnHtml += '<p><span class="f-left info-title">환불계좌</span><span class="info-text ta-right">'+returnData[1]+' '+returnData[3]+'</span></p>';
					returnHtml += '<p><span class="info-text ta-right">'+returnData[2]+'</span></p>';
				}
				returnHtml += '</div>';
				returnHtml += '</div>';
			}

			$("#delivery-box").append(returnHtml);

			$("#popup-total-price").html("총 상품금액&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+number_format(total)+"원");

			payHtml += '<div class="admin-order-delivery-info" id="pay-info" data-payType="'+data['info']['class']+'">';
			payHtml += '<div class="info-subject">결제정보</div>';
			var deliveryPriceInfo = (data['info']['delivery_price']) ? data['info']['delivery_price'] : 0;
			var payClassInfo = (data['info']['class']) ? data['info']['class'] : '결제 정보를 확인할 수 없습니다.';
			var payRegDateInfo = (data['info']['reg_date']) ? data['info']['reg_date'] : '결제 날짜를 확인할 수 없습니다.';
			var payDate = data['info']['pay_fin_date'];
			if (data['info']['pay_fin_date'] == '0000-00-00 00:00:00') {
				payDate = data['info']['reg_date'];
			}
			var payRegDate = data['info']['reg_date'];
			if (statusCheck == 'W') {
				payRegDate = '입금 미확인';
			}
			payHtml += '<div class="info-body">';
			payHtml += '<p><span class="f-left info-title">결제방식</span><span class="info-text ta-right">'+data['info']['class'];
			if (escrowState == 'Y') payHtml += '(에스크로)';
			payHtml += '</span></p>';
			payHtml += '<p><span class="f-left info-title">결제일</span><span class="info-text ta-right">'+payRegDate+'</span></p>';
			if (data['info']['class'] == '무통장 입금' || data['info']['class'] == '가상계좌') {
				var remitter = $("#remitter-"+orderGroup).val();
				if (typeof remitter == 'undefined' || remitter == '') {
					remitter = '-';
				}
				var noBank = $("#no-bank-"+orderGroup).val();
				var noBankNumber = $("#no-bank-number-"+orderGroup).val();
				var noBankName = $("#no-bank-name-"+orderGroup).val();
				var totalPrice = $("#total-price-"+orderGroup).val();
				var regDate = data['info']['reg_date'].split(" ");
				var infoDate = regDate[0].split("-");
				var newDate = new Date(infoDate[0], infoDate[1] - 1, infoDate[2]);
				var dayOfMonth = newDate.getDate();
				newDate.setDate(dayOfMonth + 7);
				var newMonth = ((newDate.getMonth() + 1) < 10) ? "0" + (newDate.getMonth() + 1) : newDate.getMonth() + 1;
				var newDay = (newDate.getDate() < 10) ? "0" + newDate.getDate() : newDate.getDate();
				regDate[1] = "23:59:59";
				var fullDate = (newDate.getFullYear() + '-' + newMonth + '-' + newDay) + " " + regDate[1];

				if (data['info']['class'] == '가상계좌' && remitter == '') {} else {
					payHtml += '<p><span class="f-left info-title">입금자명</span><span class="info-text ta-right">'+remitter+'</span></p>';
				}
				payHtml += '<p><span class="f-left info-title">입금계좌</span><span class="info-text ta-right">'+noBank+' '+noBankNumber+'</span></p>';
				payHtml += '<p><span class="f-left info-title"></span><span class="info-text ta-right">'+noBankName+'</span></p>';
				if (statusCheck == 'W') payHtml += '<p><span class="f-left info-title">입금기한</span><span class="info-text ta-right" id="pay-full-date">'+fullDate+'</span></p>';
			}
			payHtml += '<p class="cut-line"></p>';

			if (data['info']['sale_price'] != '0') {
				payHtml += '<p><span class="f-left info-title">소계</span><span class="info-text ta-right">'+number_format(allPrice)+'원</span></p>';
				payHtml += '<p><span class="f-left info-title">배송비</span><span class="info-text ta-right">'+number_format(deliveryPriceInfo)+'원</span></p>';
				payHtml += '<p><span class="f-left info-title">할인금액</span><span class="info-text ta-right">(-) '+number_format(noneTotal - total)+'원</span></p>';
			} else {
				if (total <= 0) data['info']['delivery_price'] = 0;
				payHtml += '<p><span class="f-left info-title">소계</span><span class="info-text ta-right">'+number_format(allPrice)+'원</span></p>';
				payHtml += '<p><span class="f-left info-title">배송비</span><span class="info-text ta-right">'+number_format(deliveryPriceInfo)+'원</span></p>';
				payHtml += '<p><span class="f-left info-title">할인금액</span><span class="info-text ta-right">0원</span></p>';
			}
			payHtml += '<p><span class="f-left info-title">적립금</span><span class="info-text ta-right">(-) '+number_format(parseInt(data['info']['point_price']))+'원</span></p>';

			payHtml += '<p><span class="f-left info-title">총 결제금액</span><span class="info-text ta-right">'+number_format(parseInt(realPrice) + parseInt(deliveryPriceInfo) - parseInt(data['info']['point_price']))+'원</span></p>';
			payHtml += '</div>';
			payHtml += '</div>';

			$("#delivery-box").append(payHtml);

			if (data['delivery']['reciever_name']) {
				deliveryHtml += '<div class="admin-order-delivery-info">';
				deliveryHtml += '<div class="info-subject">배송정보';
				if (location.indexOf('_df') == -1 && 
					location.indexOf('_ef') == -1 && 
					location.indexOf('_f') == -1 && 
					location.indexOf('cancel') == -1 && 
					location.indexOf('return') == -1 && 
					location.indexOf('exchange') == -1
				) {
					deliveryHtml += '<span class="delivery-edit" data-orderGroup="'+orderGroup+'">수정</span>';
				}
				deliveryHtml += '</div>';
				deliveryHtml += '<div class="info-body">';
				if (data['delivery']['new_postcode']) {
					deliveryHtml += '<p class="title">신규 배송지</p>';
					deliveryHtml += '<p><span class="f-left info-title">이름</span><span class="info-text">'+data['delivery']['new_name']+'</span></p>';
					deliveryHtml += '<p><span class="f-left info-title">주소</span><span class="info-text">'+data['delivery']['new_addr']+', '+data['delivery']['new_addr2']+'</span></p>';
					deliveryHtml += '<p><span class="f-left info-title">연락처</span><span class="info-text">'+data['delivery']['new_phone']+'</span></p>';
					deliveryHtml += '<p class="title">기존 배송지</p>';
				}
				deliveryHtml += '<input type="hidden" id="r-delivery-name" value="'+data['delivery']['reciever_name']+'">';
				deliveryHtml += '<input type="hidden" id="r-delivery-phone" value="'+data['delivery']['reciever_phone']+'">';
				deliveryHtml += '<input type="hidden" id="r-delivery-postcode" value="'+data['delivery']['delivery_postcode']+'">';
				deliveryHtml += '<input type="hidden" id="r-delivery-addr1" value="'+data['delivery']['delivery_address']+'">';
				deliveryHtml += '<input type="hidden" id="r-delivery-addr2" value="'+data['delivery']['delivery_detail_address']+'">';
				deliveryHtml += '<p><span class="f-left info-title">이름</span><span class="info-text">'+data['delivery']['reciever_name']+'</span></p>';
				deliveryHtml += '<p><span class="f-left info-title">주소</span><span class="info-text">'+data['delivery']['delivery_address']+', '+data['delivery']['delivery_detail_address']+'</span></p>';
				deliveryHtml += '<p><span class="f-left info-title">연락처</span><span class="info-text">'+data['delivery']['reciever_phone']+'</span></p>';
				deliveryHtml += '</div>';
				deliveryHtml += '</div>';

				$("#delivery-box").append(deliveryHtml);
			}

			if (data['requests']['requests']) {
				requestsHtml += '<div class="admin-order-delivery-info">';
				requestsHtml += '<div class="info-subject">추가 메세지</div>';
				requestsHtml += '<div class="info-body" id="requests"><p>'+data['requests']['requests']+'</p></div>';
				requestsHtml += '</div>';

				$("#delivery-box").append(requestsHtml);
			}

			buyrHtml += '<div class="admin-order-delivery-info">';
			buyrHtml += '<div class="info-subject">주문자 정보</div>';
			buyrHtml += '<div class="info-body" id="buyr_info">';
			if (data['setting']['member_status'] == 'U') buyrHtml += '<p><span class="f-left info-title">아이디</span><span class="info-text">'+data['requests']['um_id']+'</span></p>';
			else buyrHtml += '<p><span class="f-left info-title">아이디</span><span class="info-text">비회원</span></p>';
			buyrHtml += '<p><span class="f-left info-title">이름</span><span class="info-text">'+data['delivery']['name']+'</span></p>';
			buyrHtml += '<p><span class="f-left info-title">연락처</span><span class="info-text">'+data['delivery']['phone']+'</span></p>';
			buyrHtml += '<p><span class="f-left info-title">이메일</span><span class="info-text">'+data['delivery']['email']+'</span></p>';
			buyrHtml += '</div>';
			buyrHtml += '</div>';

			$("#delivery-box").append(buyrHtml);

			if (!data['delivery']['delivery_number']) data['delivery']['delivery_number'] = '';

			if (location.indexOf('order_df') == -1 && location.indexOf('order_ef') == -1) {
				deliverySection += '<div class="admin-order-delivery-info">';
				deliverySection += '<div class="info-subject">운송장번호</div>';
				deliverySection += '<div class="info-body">';
				if (location.indexOf('_df') == -1 && 
					location.indexOf('_ef') == -1 && 
					location.indexOf('_f') == -1 && 
					location.indexOf('_d') == -1 && 
					location.indexOf('cancel') == -1 && 
					location.indexOf('return') == -1 && 
					location.indexOf('exchange') == -1
				) {
					deliverySection += '<form name="delivery_form" method="post" action="'+shoppingUrl+'/delivery_status">';
					if (escrowState == 'Y') {
						deliverySection += '<input type="hidden" name="tno" value="'+data['info']['kcp_number']+'">';
						deliverySection += '<input type="hidden" name="order_group" value="'+data['info']['order_group']+'">';
					}
					deliverySection += '<div class="delivery_cpWrap">';
					deliverySection += '<div class="delivery-number-box common-payment-config-selectbox" id="delivery-section">';
					deliverySection += '<input type="hidden" name="order_group" value="'+orderGroup+'">';
					deliverySection += '<select class="delivery-select selectpicker dropdown" id="delivery_cp" name="delivery_company" onchange="deliveryChange(this.value)">';
					deliverySection += '<option value="">택배사를 선택해주세요.</option>';
					deliverySection += '<option value="cj"';
					if (data['setting']['b_delivery_company'] == 'cj') {deliverySection += "selected";}
					deliverySection += '>CJ대한통운</option>';
					deliverySection += '<option value="pt"';
					if (data['setting']['b_delivery_company'] == 'pt') {deliverySection += "selected";}
					deliverySection += '>우체국택배</option>';
					deliverySection += '<option value="hj"';
					if (data['setting']['b_delivery_company'] == 'hj') {deliverySection += "selected";}
					deliverySection += '>한진택배</option>';
					deliverySection += '<option value="lt"';
					if (data['setting']['b_delivery_company'] == 'lt') {deliverySection += "selected";}
					deliverySection += '>롯데택배</option>';
					deliverySection += '<option value="lg"';
					if (data['setting']['b_delivery_company'] == 'lg') {deliverySection += "selected";}
					deliverySection += '>로젠택배</option>';
					deliverySection += '<option value="cv"';
					if (data['setting']['b_delivery_company'] == 'cv') {deliverySection += "selected";}
					deliverySection += '>CVSnet 편의점택배</option>';
					deliverySection += '<option value="cu"';
					if (data['setting']['b_delivery_company'] == 'cu') {deliverySection += "selected";}
					deliverySection += '>CU 편의점택배</option>';
					deliverySection += '<option value="ems"';
					if (data['setting']['b_delivery_company'] == 'ems') {deliverySection += "selected";}
					deliverySection += '>EMS</option>';
					deliverySection += '<option value="etc"';
					if (data['setting']['b_delivery_company'] == 'etc') {deliverySection += "selected";}
					deliverySection += '>자가배송</option>';
					deliverySection += '</select>';
					deliverySection += '<svg xmlns="http://www.w3.org/2000/svg" vie wBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>';
					deliverySection += '</div></div>';
					if (data['setting']['b_delivery_company'] != 'etc') {
						deliverySection += '<div class="delivery_numWrap">';
						deliverySection += '<input type="text" name="delivery_number" id="delivery-number" value="'+data['delivery']['delivery_number']+'" placeholder="운송장번호">';
					} else {
						deliverySection += '<div class="delivery_numWrap" style="border:none">';
						deliverySection += '<input type="text" name="delivery_number" id="delivery-number" value="0000" placeholder="운송장번호" style="display:none">';
					}
					deliverySection += '</div>';
					deliverySection += '</div>';
					deliverySection += '</form>';
				} else {
					var company = '', newCompany = '';

					if (data['delivery']['delivery_company'] == 'cj') {company += "CJ대한통운";}
					else if (data['delivery']['delivery_company'] == 'pt') {company += "우체국택배";}
					else if (data['delivery']['delivery_company'] == 'hj') {company += "한진택배";}
					else if (data['delivery']['delivery_company'] == 'lt') {company += "롯데택배";}
					else if (data['delivery']['delivery_company'] == 'lg') {company += "로젠택배";}
					else if (data['delivery']['delivery_company'] == 'cv') {company += "CVSnet 편의점택배";}
					else if (data['delivery']['delivery_company'] == 'cu') {company += "CU 편의점택배";}
					else if (data['delivery']['delivery_company'] == 'ems') {company += "EMS";}
					else if (data['delivery']['delivery_company'] == 'etc') {company += "자가배송";}

					if (data['delivery']['new_delivery_company'] == 'cj') {newCompany += "CJ대한통운";}
					else if (data['delivery']['new_delivery_company'] == 'pt') {newCompany += "우체국택배";}
					else if (data['delivery']['new_delivery_company'] == 'hj') {newCompany += "한진택배";}
					else if (data['delivery']['new_delivery_company'] == 'lt') {newCompany += "롯데택배";}
					else if (data['delivery']['new_delivery_company'] == 'lg') {newCompany += "로젠택배";}
					else if (data['delivery']['new_delivery_company'] == 'cv') {newCompany += "CVSnet 편의점택배";}
					else if (data['delivery']['new_delivery_company'] == 'cu') {newCompany += "CU 편의점택배";}
					else if (data['delivery']['new_delivery_company'] == 'ems') {newCompany += "EMS";}
					else if (data['delivery']['new_delivery_company'] == 'etc') {newCompany += "자가배송";}

					if (data['delivery']['new_postcode']) {
						deliverySection += '<p class="title">신규 운송장번호</p>';
						deliverySection += '<p><span class="f-left info-title">택배사</span><span class="info-text ta-right">'+newCompany+'</span></p>';
						if (newCompany != '자가배송') deliverySection += '<p><span class="f-left info-title">운송장번호</span><span class="info-text ta-right">'+data['delivery']['new_delivery_number']+'</span></p>';
						deliverySection += '<p class="title">기존 운송장번호</p>';
					}
					deliverySection += '<p><span class="f-left info-title">택배사</span><span class="info-text ta-right">'+company+'</span></p>';
					if (company != '자가배송') deliverySection += '<p><span class="f-left info-title">운송장번호</span><span class="info-text ta-right">'+data['delivery']['delivery_number']+'</span></p>';
				}
				deliverySection += '</div>';
				deliverySection += '</div>';

				if (data['delivery']['reciever_name']) if (statusCheck != 'W') $("#delivery-box").append(deliverySection);
			}

			$('#delivery_cp').selectpicker();

			var returnBank = $('#return-bank-'+orderGroup).val();
			var returnBankName = $('#return-bank-name-'+orderGroup).val();
			var returnBankNumber = $('#return-bank-number-'+orderGroup).val();

			if (returnBank) {
				var returnBankHtml = '<div class="admin-order-delivery-info">\
										<div class="info-subject">추가 메세지</div>\
										<p>입금은행<span>'+returnBank+'</span></p>\
										<p>입금계좌<span>'+returnBankNumber+'</span></p>\
										<p>예금주<span>'+returnBankName+'</span></p>\
										</div>\
									</div>';
				$("#return-bank").html(returnBankHtml);
			}

			var ordernumStr = '<span class="orderNumText">주문번호 # '+orderGroup+'</span>';
			$("#order-group-number .orderNumText").remove();
			$("#order-group-number").append(ordernumStr);
			$("#payment-list-body").html(listHtml);
			
			$(".payment-popup").fadeIn('slow');
			$(".payment-box").fadeIn('slow');

			$("#submit-change,#submit-change-m").empty();
			$('#submit-change,#submit-change-m').attr('data-shoppingUrl', shopping_url);
			$('#submit-change,#submit-change-m').attr('data-orderGroup', data['info']['order_group']);
			if (location.indexOf('order_f') != -1) {
				$("#submit-change,#submit-change-m").addClass('cancel-status-button');
				$("#submit-change,#submit-change-m").removeClass('status-button');
				if (escrowState == 'Y' && checkExchange == 'Y') {
					buttonHtml = '\
						<button type="button" class="status-change-btn" data-statusType="E" data-type="'+statusCheck+'" style="width: 100%;">교환 신청</button>\
					';
				} else {
					buttonHtml = '\
						<button type="button" class="status-change-btn" data-statusType="E" data-type="'+statusCheck+'">교환 신청</button>\
						<span></span>\
						<button type="button" class="status-change-btn" data-statusType="R" data-type="'+statusCheck+'">반품 신청</button>\
					';
				}
			} else if (location.indexOf('order_df') != -1 || location.indexOf('order_ef') != -1) {
				$("#submit-change,#submit-change-m").addClass('cancel-status-button');
				$("#submit-change,#submit-change-m").removeClass('status-button');
				buttonHtml = '<button type="button" class="status-change-btn" style="width:100%;" data-statusType="C" data-type="'+statusCheck+'">취소 신청</button>';
			} else if (location.indexOf('order_d') != -1) {
				$("#submit-change,#submit-change-m").addClass('cancel-status-button');
				$("#submit-change,#submit-change-m").removeClass('status-button');
				if (escrowState == 'Y') {
					if (checkExchange == 'Y') {} else {
						buttonHtml = '\
							<button type="button" class="order-wait" style="width:100%;">배송중 취소</button>\
						';
					}
				} else {
					buttonHtml = '\
						<button type="button" class="order-change-btn" data-orderSet="F">신규 주문으로 변경</button>\
						<span></span>\
						<button type="button" class="order-change-btn" data-orderSet="E">배송 완료로 변경</button>\
					';
				}
			} else if (location.indexOf('order') != -1) {
				$("#submit-change,#submit-change-m").addClass('cancel-status-button');
				$("#submit-change,#submit-change-m").removeClass('status-button');
				if (status == 'Y') {
					if (data['info']['class'] == '가상계좌') {
						buttonHtml = '<button type="button" class="status-change-btn" style="width:100%;" data-statusType="C" data-type="'+statusCheck+'">취소 신청</button>';
					} else {
						buttonHtml = '\
							<button type="button" class="full-button no-bank-btn">입금 정보 확인</button>\
							<span></span>\
							<button type="button" class="status-change-btn" data-statusType="C" data-type="'+statusCheck+'">취소 신청</button>\
						';
					}
				} else {
					buttonHtml = '\
						<button type="button" class="full-button delivery-confirm-btn">발송처리</button>\
						<span></span>\
						<button type="button" class="status-change-btn" data-statusType="C" data-type="'+statusCheck+'">취소 신청</button>\
					';
				}
			} else if (location.indexOf('cancel_f') != -1) {
				buttonHtml = '';
			} else if (location.indexOf('cancel') != -1) {
				$("#submit-change,#submit-change-m").addClass('cancel-status-button');
				$("#submit-change,#submit-change-m").removeClass('status-button');
				if (escrowState == 'Y') {
					buttonHtml = '\
						<button type="button" id="cancel-confirm" style="width: 100%;">취소 완료처리</button>\
					';
				} else {
					buttonHtml = '\
						<button type="button" id="cancel-confirm">취소 완료처리</button>\
						<span></span>\
						<button type="button" id="cancel-disabled">취소 거부설정</button>\
					';
				}
			} else if (location.indexOf('return_f') != -1) {
				buttonHtml = '';
			} else if (location.indexOf('return') != -1) {
				$("#submit-change,#submit-change-m").removeClass('cancel-status-button');
				$("#submit-change,#submit-change-m").addClass('status-button');
				if (escrowState == 'Y') {
					if (statusCheck == 'S') {
						buttonHtml = '\
							<button type="button" class="order-wait" data-statusType="RY" style="width:100%;">반품 완료처리</button>\
						';
					} else {
						buttonHtml = '\
							<button type="button" class="return-btn" data-statusType="RY" style="width:100%;">반품 완료처리</button>\
						';
					}
				} else {
					buttonHtml = '\
						<button type="button" class="return-btn" data-statusType="RY">반품 완료처리</button>\
						<span></span>\
						<button type="button" class="return-btn" data-statusType="RW">반품 보류설정</button>\
						<span></span>\
						<button type="button" class="return-btn" data-statusType="RN">반품 거부처리</button>\
						<span></span>\
						<button type="button" class="return-btn" data-statusType="EC">교환으로 변경</button>\
					';
				}
			} else if (location.indexOf('exchange_f') != -1) {
				buttonHtml = '';
			} else if (location.indexOf('exchange') != -1) {
				$("#submit-change,#submit-change-m").removeClass('cancel-status-button');
				$("#submit-change,#submit-change-m").addClass('status-button');
				if (escrowState == 'Y') {
					buttonHtml = '\
						<button type="button" class="exchange-btn" data-statusType="EY" style="width: 33%">교환 재발송처리</button>\
						<span></span>\
						<button type="button" class="exchange-btn" data-statusType="EW" style="width: 33%">교환 보류설정</button>\
						<span></span>\
						<button type="button" class="exchange-btn" data-statusType="EN" style="width: 33%">교환 거부처리</button>\
					';
				} else {
					buttonHtml = '\
						<button type="button" class="exchange-btn" data-statusType="EY">교환 재발송처리</button>\
						<span></span>\
						<button type="button" class="exchange-btn" data-statusType="EW">교환 보류설정</button>\
						<span></span>\
						<button type="button" class="exchange-btn" data-statusType="EN">교환 거부처리</button>\
						<span></span>\
						<button type="button" class="exchange-btn" data-statusType="RC">반품으로 변경</button>\
					';
				}
			}

			$("#submit-change,#submit-change-m").html(buttonHtml);
		}
	});
}

function deliveryChange (val) {
	if (val == 'etc' || val == '') {
		$('.delivery_numWrap').fadeOut(0);
		$('.delivery_numWrap').css('border', 'none');
		$('#delivery-number').val('0000');
		$('#delivery-number').fadeOut(0);
	} else {
		$('.delivery_numWrap').fadeIn(0);
		$('.delivery_numWrap').css('border', '1px solid #dbdcdf');
		$('#delivery-number').val('');
		$('#delivery-number').fadeIn(0);
	}
}

$(function () {
	$(document).on('click', '#review-loop tr, .photo-list', function () {
		var sid = property['SID'];
		var seq = $(this).attr('data-seq');
		if (seq == undefined) return false;

		if(typeof sid == "undefined" || typeof seq == "undefined") {
			alert('정보가 올바르지 않습니다');
			return false;
		}

		$.post('/_check_review', { sid:sid, seq:seq }, function(data) {
			if(typeof data.error != "undefined" && data.error) {
				$(this).showModalFlat('', data.error, true, false, '', 'close');
				return false;
			}

			var c_data = data.r;
			var image = c_data.review.review_image.split("||");
			var reviewImage = '';
			for (var i=0;i<image.length;i++) {
				reviewImage += '<img src="'+image[i]+'">';
			}

			var modal_str = '\
				<div class="review-body">\
					<div class="cl-s-product-jumbotron clearfix">\
						<div class="cl-s-product-thumb">\
							<img src="' + c_data.pdata.img + '" alt="' + c_data.pdata.name + '" class="' + c_data.pdata.img_align + '" />\
						</div>\
						<div class="cl-s-product-info">\
							<h5 class="cl-s-product-title">' + c_data.pdata.name + '</h5>\
						</div>\
					</div>\
					<div class="review-member-info">\
						<span>' + c_data.odata.name + '<span class="view-review-date">' + c_data.review.reg_date + '</span></span>';
						if (c_data.review_status == 'Y' || c_data.review_status == 'A') {
							modal_str += '<div class="review-edit-box" data-pnum="'+c_data.review.product_number+'" data-onum="'+c_data.review.order_number+'" data-seq="'+c_data.review.seq+'">';
							 if (c_data.review_status == 'Y') {
								modal_str += '\
									<svg viewBox="0 0 13 13" width="13px" height="13px" fill="#8c8c8c" class="review-edit">\
										<path d="M4.32 8.05C4.2 8.39 4.46 8.71 4.79 8.71c0.05 0 0.11-0.01 0.16-0.03L7 8l6-6 -2-2L5 6 4.32 8.05zM5.87 6.54L11 1.41 11.59 2 6.46 7.13 5.58 7.42 5.87 6.54z"/>\
										<path d="M9 11c0 0.55-0.45 1-1 1H2c-0.55 0-1-0.45-1-1V4c0-0.55 0.45-1 1-1h3V2H2C0.9 2 0 2.9 0 4v7c0 1.1 0.9 2 2 2h6c1.1 0 2-0.9 2-2V8H9V11z"/>\
									</svg>\
								';
							}
							modal_str += '\
									<svg viewBox="0 0 12 13" width="12px" height="13px" fill="#8c8c8c" class="review-delete">\
										<path d="M12 2h-1H9V0H3.02v2H1 0v1h1v8c0 1.1 0.9 2 2 2h6c1.1 0 2-0.9 2-2V3h1V2zM4.02 1H8v1H4.02V1zM10 11c0 0.55-0.45 1-1 1H3c-0.55 0-1-0.45-1-1V3h1.02H9h1V11z"/>\
										<rect x="4" y="4" width="1" height="7"/>\
										<rect x="7" y="4" width="1" height="7"/>\
									</svg>\
								</div>\
							';
						}
					modal_str += '\
					</div>\
					<div class="view-review-box">\
						<div class="review-score">';
						for(var i=0;i<5;i++) {
							var rs_onof = (i < c_data.review.review_score) ? 'on' : 'off';
							modal_str += '<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/cl_icon_star_'+rs_onof+'.png">';
						}
						modal_str += '\
						</div>\
						<div class="review-box-content"><pre>'+c_data.review.review+'</pre></div>\
						<div class="review-box-image">'+reviewImage+'</div>\
					</div>\
				</div>\
			\
			';

			// $('.flat-modal .modal').modal('hide');
			var wrModal = $(this).showModalFlat('상품 후기', modal_str, false, false, '', '','','cl-s-product-review-write cl-modal cl-s-btn cover', false, '', function () {
			});


		},'json');
	});
	$(document).on('click', '.review-edit', function () {
		var sid = property['SID'];
		var $parent = $(this).parent(),
			pnum = $parent.attr('data-pnum'),
			onum = $parent.attr('data-onum'),
			seq = $parent.attr('data-seq');

		$('.modal-backdrop').fadeOut(200);
		$('.modal').fadeOut(200);
		setTimeout(function () {
			$('.modal-backdrop').remove();
			$('.modal').remove();


			if(typeof sid == "undefined" || typeof pnum == "undefined" || typeof onum == "undefined") {
				alert('정보가 올바르지 않습니다');
				return false;
			}

			$.post('/_check_review', { sid:sid, seq: seq, mode:'review' }, function(data) {
				if(typeof data.error != "undefined" && data.error) {
					$(this).showModalFlat('', data.error, true, false, '', 'close');
					return false;
				}

				var c_data = data.r;
				var modal_str = '\
					<div class="review-body">\
						<div class="cl-s-product-jumbotron clearfix">\
							<div class="cl-s-product-thumb">\
								<img src="' + c_data.pdata.img + '" alt="' + c_data.pdata.name + '" class="' + c_data.pdata.img_align + '" />\
							</div>\
							<div class="cl-s-product-info">\
								<h5 class="cl-s-product-title">' + c_data.pdata.name + '</h5>\
					';
					if(typeof c_data.pdata.option != "undefined" && c_data.pdata.option) {
						modal_str += '\
								<div class="option-str">옵션: ' + c_data.pdata.option + '</div>\
						';
					}

					var image = c_data.review.review_image.split("||");
					var reviewImage = '';
					for (var i=0;i<image.length;i++) {
						reviewImage += '\
							<li id="review-image-'+i+'">\
								<img src="'+image[i]+'" class="img-responsive" />\
								<input type="hidden" name="review_image[]" value="'+image[i]+'" />\
								<div class="cl-s-files-img-close review-img-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8" width="8" height="8"><path d="M4.71 4l3.15-3.15c0.2-0.2 0.2-0.51 0-0.71s-0.51-0.2-0.71 0L4 3.29 0.85 0.15c-0.2-0.2-0.51-0.2-0.71 0s-0.2 0.51 0 0.71L3.29 4 0.15 7.15c-0.2 0.2-0.2 0.51 0 0.71C0.24 7.95 0.37 8 0.5 8s0.26-0.05 0.35-0.15L4 4.71l3.15 3.15C7.24 7.95 7.37 8 7.5 8s0.26-0.05 0.35-0.15c0.2-0.2 0.2-0.51 0-0.71L4.71 4z"/></svg></div>\
							</li>\
						';
					}
					modal_str += '\
							</div>\
						</div>\
						<div class="review-star">\
							<h5>상품이 만족스러우셨나요?</h5>\
							<div class="star text-center">';
							for(var i=0;i<5;i++) {
								var rs_onof = (i < c_data.review.review_score) ? 'active' : '';
								modal_str += '<span data-idx="'+(i+1)+'" class="'+rs_onof+'"></span>';
							}
							modal_str += '\
							</div>\
						</div>\
						<div class="review-content">\
							<h5>어떤 점이 좋았나요?</h5>\
							<div class="cl-s-form-wrap">\
								<div class="cl-s-form-group input-label-hide">\
									<textarea class="cl-s-form-control" id="review-str" name="review" maxlength="1000" required="required">'+c_data.review.review+'</textarea>\
									<label for="input" class="cl-s-control-label">자세한 내용을 적어주세요. (1000자 이내)</label>\
								</div>\
							</div>\
							<div class="cl-s-files review-files">\
								<input id="review-file" type="file" name="files[]" multiple data-sid="' + sid + '" data-uid=\"' + c_data.writer.id + '\">\
								<label class="cl-s-file-update review-file-update clearfix"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20"><path d="M0 0v20h20V0H0zM19 1v11.3l-3-3 -4 4 -6-6 -5 5V1H19zM1 19v-5.3l5-5 6 6 4-4 3 3V19H1z"/><circle cx="14.5" cy="5.5" r="1.5"/></svg> <span>사진</span></label>\
								<ul class="cl-s-files-list review-files-list clearfix">\
								'+reviewImage+'\
								</ul>\
							</div>\
						</div>\
					</div>\
				\
				';

				// $('.flat-modal .modal').modal('hide');
				var wrModal = $(this).showModalFlat('후기 작성', modal_str, true, true,function () {

					var cl_s_f_body = $('.cl-s-product-review-write .review-content');
					cl_s_f_body.find('.cl-s-form-wrap').each(function() {
						var check_input = $(this).find('.cl-s-form-control'),
							val = check_input.val().trim();

						if(val.length == 0) {
							$(this).removeClass('error').addClass('empty');
							$(this).find('.cl-s-control-label.error').remove();
						} else {
							if($(this).hasClass('error')) {
								check_input.focus();
							}
						}
					});

					if(cl_s_f_body.find('.cl-s-form-wrap.empty, .cl-s-form-wrap.error').length > 0) {
						cl_s_f_body.find('.cl-s-form-wrap.empty, .cl-s-form-wrap.error').eq(0).find('.cl-s-form-control').focus();
						return false;
					}

					var review = $('#review-str').val().trim(),
						review_star = $('.cl-s-product-review-write .review-star .star .active').length,
						review_image = new Array();

					$('input[name="review_image[]"]').each(function(i) {
						review_image[i] = $(this).val();
					});

					var review_data = {
						status : 'U',
						page_mode : 'product',

						pnum : pnum,
						onum : onum,
						seq : seq,
						mb_status : c_data.writer.status,
						review : review,
						review_count : review_star,
						images : review_image
					};

					if(c_data.writer.status == 'T') {
						review_data['name'] = c_data.odata.name;
						// review_data['order_group'] = c_data.order_data.group;
					}

					$.post('/_review_write', { sid:sid, data:JSON.stringify(review_data) }, function(rw_data) {
						if(typeof rw_data.error != "undefined" && rw_data.error) {
							$(this).showModalFlat('ERROR', rw_data.error, true, false, '', 'close');
							return false;
						}

						wrModal.modal('hide');
						setTimeout(function () {
							location.reload();
						}, 200); 
					}, 'json');
				},'close','수정하기','cl-s-product-review-write cl-modal cl-s-btn cover', false, '', function() {
					$('.cl-s-product-review-write .cl-s-form-group').on('click',function(e) {
						if($(e.target).hasClass('cl-s-form-group')) {
							$(e.target).find('.cl-s-form-control:not([type=hidden])').focus();
						}
					});

					$('.cl-s-product-review-write .cl-s-form-control').on({
						focus: function(e) {
							$(this).closest('.cl-s-form-wrap').addClass('active');
						},
						blur: function(e) {
							var val = $(this).val().trim();

							$(this).closest('.cl-s-form-wrap').removeClass('active');
							if(val.length == 0) {
								$(this).closest('.cl-s-form-wrap').removeClass('error').addClass('empty');
								$(this).closest('.cl-s-form-wrap').find('.cl-s-control-label.error').remove();
								return false;
							} else {
								$(this).closest('.cl-s-form-wrap').removeClass('empty');
								if(val.length < 5) {
									$(this).closest('.cl-s-form-wrap').addClass('error');
									if($(this).parent().find('.cl-s-control-label.error').length > 0) {
										$(this).parent().find('.cl-s-control-label.error').html($.lang[LANG]['customsite.validate.message.minlengthto5']);
									} else {
										$(this).after('<label for="input" class="cl-s-control-label error">'+$.lang[LANG]['customsite.validate.message.minlengthto5']+'</label>');
									}
									return false;
								}
							}

							$(this).closest('.cl-s-form-wrap').removeClass('error').removeClass('empty');
							$(this).closest('.cl-s-form-wrap').find('.cl-s-control-label.error').remove();
						}
					});


					$(document).on('click', '.cl-s-product-review-write .review-img-close', function() {
						$(this).closest('li').remove();
					})

					$('.cl-s-product-review-write .review-file-update').on('click', function () {
						$("#review-file").click();
					});

					$('.cl-s-product-review-write #review-file').on({
						click: function () {

							var reviewImageCnt = $('.review-files-list').children('li').length;
							if (reviewImageCnt >= 5) {
								alert('이미지는 최대 5개까지 등록이 가능합니다.');
								return false;
							}

							var sid = $('#review-file').attr('data-sid'),
								uid = $('#review-file').attr('data-uid');

							$.uploadON();
							$(this).fileupload({
								url: '/_upload/type/review/sid/'+sid+'/uid/'+uid,
								dataType: 'json',
								pasteZone: null,
								async: true,
								sequentialUploads: true,
								add: function(e, data) {
									var r = $.upload_add(e,data);

									if(r.submit) {
										var jqXHR = data.submit();
										UPLOAD++;
									} else {
										data.context.find('.loading').html('<i class="fa fa-times error"></i>');
										data.context.find('.ing').addClass('error').text(r.err);
									}

									$(document).on('click','.upload-cancel .btn', function(e) {
										if(jqXHR != undefined) jqXHR.abort();
										data.context.fadeOut().remove();
										$('.uploadModal #file-upload-progress').css('width','0%');
										$.uploadOFF();
									});
								},
								progress: function(e, data) {
									$.upload_progress(e,data);
								},						
								done: function(e, data) {
									$.upload_done(e,data);
									UPLOADED++;

									var src = (typeof data.result.magic != 'undefined') ? data.result.magic : data.result.src;
									var reviewImage = '\
										<li id="review-image-'+reviewImageCnt+'">\
											<img src="'+src+'" class="img-responsive" />\
											<input type="hidden" name="review_image[]" value="'+src+'" />\
											<div class="cl-s-files-img-close review-img-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8" width="8" height="8"><path d="M4.71 4l3.15-3.15c0.2-0.2 0.2-0.51 0-0.71s-0.51-0.2-0.71 0L4 3.29 0.85 0.15c-0.2-0.2-0.51-0.2-0.71 0s-0.2 0.51 0 0.71L3.29 4 0.15 7.15c-0.2 0.2-0.2 0.51 0 0.71C0.24 7.95 0.37 8 0.5 8s0.26-0.05 0.35-0.15L4 4.71l3.15 3.15C7.24 7.95 7.37 8 7.5 8s0.26-0.05 0.35-0.15c0.2-0.2 0.2-0.51 0-0.71L4.71 4z"/></svg></div>\
										</li>\
									';

									$(".cl-s-product-review-write .review-files-list").append(reviewImage);
									reviewImageCnt++;

									if(UPLOADED) {
										if(UPLOAD==UPLOADED) {
											setTimeout(function() {
												UPLOAD = 0;
												UPLOADED = 0;
												UPLOADSIZE = 0;
												PROGRESS = 0;
												$.uploadOFF();
											},1000);
										}
									}
								},
								progressall: function (e, data) {
									$.upload_progressall(e,data);
								},
								start : function(e, data) {
									$.upload_start(e,data);
									progress1 = 0; progress2 = 0; PROGRESS = 0;
								},
								dragover : function(e, data) {
									e.preventDefault();
								},
							}).prop('disabled', !$.support.fileInput)
								.parent().addClass($.support.fileInput ? undefined : 'disabled');
						}
					});

					$('.cl-s-product-review-write .review-star .star span').on('click', function() {
						var rCount = $(this).attr('data-idx');
						$(this).parent().children('span').removeClass('active');
						$(this).addClass('active').prevAll('span').addClass('active');
					});
				});
			},'json');
		}, 200);
	});

	$(document).on('click', '.review-delete', function () {
		if (confirm('정말로 삭제하시겠습니까?')) {
			var sid = property['SID'];
			var $parent = $(this).parent(),
				pnum = $parent.attr('data-pnum'),
				onum = $parent.attr('data-onum'),
				seq = $parent.attr('data-seq');

			$.ajax({
				url: '/_review_delete',
				type: 'post',
				data: {
					sid: sid,
					seq: seq,
				},
				success: function (data) {
					alert('삭제가 완료되었습니다.');
					location.reload();
				}
			});
		}
	});

	$(document).on('click', '.review-btn-write', function () {
		var pnum = $(this).attr('data-pnum'), sid = property['SID'];
		var umStatusCheck = $(this).attr('data-um_status');

		if (umStatusCheck == 'T') {
			alert('후기 작성은 회원 로그인 후, 비회원은 비회원 주문조회 페이지에서 후기작성이 가능합니다.');
			localStorage.referer = window.location.pathname;
			location.href="/_login";
			return false;
		}

		$.ajax({
			url: '/_check_review_list',
			type: 'post',
			dataType: 'json',
			data: {
				'sid': sid,
				'pnum': pnum,
			},
			success: function (data) {
				if (data.r.length < 1) {
					alert('후기 작성이 가능한 주문이 존재하지 않습니다.');
					return false;
				}
				var content = '<div class="review-view-list">';
				for (var i=0;i<data.r.length;i++) {
					content += '<div class="review-body">\
						<div class="cl-s-product-jumbotron clearfix">\
							<div class="cl-s-product-thumb">\
								<img src="' + data.r[i].pdata.img + '" alt="' + data.r[i].pdata.name + '" class="' + data.r[i].pdata.img_align + '" />\
							</div>\
							<div class="cl-s-product-info">\
								<h5 class="cl-s-product-title">' + data.r[i].pdata.name + '</h5>\
					';
					if(typeof data.r[i].pdata.option != "undefined" && data.r[i].pdata.option) {
						content += '\
								<div class="option-str">옵션: ' + data.r[i].pdata.option + '</div>\
						';
					}
					content += '\
						   	 	</div>\
								<div class="review-btn-box">\
									<button class="review-write-btn" data-pnum="'+pnum+'" data-onum="'+data.r[i].pdata.order_number+'">후기작성</button>\
								</div>\
							</div>\
						</div>\
					   ';
				}
				content += '</div>';

				$(this).showModalFlat('후기 상품 선택',content,false,false,'','','', 'cl-s-product-review-write cl-modal cl-s-btn cover cl-s-review-view-info', false ,'', function () {
					$(document).on('click', '.review-write-btn', function () {
						var sid = property['SID'],
							pnum = $(this).attr('data-pnum'),
							onum = $(this).attr('data-onum');

						$('.close').click();
						$.shoppingmall.writeReviewModal(sid,pnum,onum,'product');
					});
				});
			}
		});
	});

	//if(typeof SID !== 'undefined') $.dashbtSubMenu.set('shopping');
	$.setMobileNav.set();
	
	$(window).on('resize', function () {
		$.setMobileNav.set();
	});
	
	$(".close-btn-box").on('click', function () {
		$('#product-all-check').remove();
		$(".payment-box").fadeOut(300);
		$(".payment-popup").fadeOut(300);
		$("#delivery-box").empty();
	});

	$(document).on('click', '.order-wait', function () {
		if (confirm('배송중 취소의 경우 부분 취소가 불가능합니다. 계속 진행하시겠습니까?') === true) {
			var location = window.location.href,
				shoppingUrl = '/shopping';
			if (location.indexOf('_admin') != -1) shoppingUrl = '/_admin/shopping';

			var escrow = $('#escrow').val();
			var dStatus = $('#d-status').val();

			var checkData = $(this).attr('data-statusType');

			if (dStatus == 'EH') {
				alert('이미 배송중 취소 처리가 되었습니다.');
				return false;
			}

			if (escrow == 'Y') {
				var tno = $('#escrow-tno').val();
				var orderGroup = $('#order_group').val();
				if (checkData == 'RY') {
					var content = '\
						<form name="cancel_form" method="post" action="'+shoppingUrl+'/pay_hold">\
							<input type="hidden" name="order_group" value="'+orderGroup+'">\
							<input type="hidden" name="tno" value="'+tno+'">\
							<input type="hidden" name="d_status" value="R">\
							<input type="hidden" name="location" value="'+location+'">\
							<div class="cancel-process">\
								<svg viewBox="0 0 90 90" width="90" height="90">\
									<path fill="#4789e7" d="M45 0C20.15 0 0 20.15 0 45s20.15 45 45 45c24.85 0 45-20.15 45-45S69.85 0 45 0zM45 86C22.39 86 4 67.61 4 45S22.39 4 45 4s41 18.39 41 41S67.61 86 45 86z"/>\
									<path fill="#4789e7" d="M45 34c-1.1 0-2 0.9-2 2v32c0 1.1 0.9 2 2 2 1.1 0 2-0.9 2-2V36C47 34.9 46.1 34 45 34z"/>\
									<circle fill="#4789e7" cx="45" cy="23" r="3"/>\
								</svg>';
							if (escrow == 'Y') {
								content += '<h3 class="modal-title">에스크로 반품처리 안내</h3>\
									<div class="cancel-contents">- 반품처리 시 구매자의 환불정산액에서 반품 수수료(330원)가 차감됩니다.<br>- 환불정산액은 반품처리 후 1~3영업일 후에 지급됩니다.<br>- 본 페이지에서 반품처리 시 KCP에서도 자동 취소처리됩니다.</div>';
							} else {
								content += '<h3 class="modal-title">반품처리 안내</h3>\
									<div class="cancel-contents">카드결제와 계좌이체로 주문받은 상품은 <a href="https://admin8.kcp.co.kr" target="_blank">KCP 관리자 페이지</a>를 통해 거래취소를 하셔야 하며, 무통장 입금은 환불계좌로 환불금액을 직접 입금해 주셔야 합니다.</div>';
							}
							content += '<div class="cancel-confirm-text">취소처리 하시겠습니까?</div>\
							</div>\
							<div class="btn-box">\
								<button type="submit" class="popup-primary-btn">반품 완료</button>\
								<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
							</div>\
						</form>\
						';
					$(this).showModalFlat('',content,false,false,'','','', 'cl-s-cancel-info cl-cmmodal cl-s-btn cover', false ,'', '');
				} else {
					var content = '\
						<form name="cancel_form" method="post" action="'+shoppingUrl+'/pay_hold" onsubmit="return checkCancel()">\
							<input type="hidden" name="order_group" value="'+orderGroup+'">\
							<input type="hidden" name="d_status" value="H">\
							<input type="hidden" name="tno" value="'+tno+'">\
							<input type="hidden" name="location" value="'+location+'">\
							<h3 class="sub-order-title">취소 상세사유</h3>\
							<div class="cl-common-form-wrap">\
								<div class="cl-common-form-group input-label-hide">\
									<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
									<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
								</div>\
							</div>\
							<div class="escrow-warring bottom-escrow">\
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="15" height="15">\
									<path fill="#4789e7" d="M6.5 0C2.91 0 0 2.91 0 6.5S2.91 13 6.5 13 13 10.09 13 6.5 10.09 0 6.5 0zM6.5 12C3.47 12 1 9.53 1 6.5S3.47 1 6.5 1 12 3.47 12 6.5 9.53 12 6.5 12z"/>\
									<rect fill="#4789e7" x="6" y="3" width="1" height="5"/>\
									<rect fill="#4789e7" x="6" y="9" width="1" height="1"/>\
								</svg>\
								에스크로 환불 안내\
								<div class="escrow-return-info">- 취소처리 시 구매자의 환불정산액에서 취소 수수료(330원)가 차감됩니다.</div>\
								<div class="escrow-return-info">- 환불정산액은 취소처리 후 1~3영업일 후에 지급됩니다.</div>\
								<div class="escrow-return-info">- 본 페이지에서 취소처리 시 KCP에서도 자동 취소처리됩니다.</div>\
							</div>\
							<button type="submit" class="popup-primary-btn">취소 처리</button>\
							<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
						</form>\
					';
					$(this).showModalFlat('에스크로 배송 중 취소', content, false, false, '', '', '', 'cl-s-escrow-info cl-cmmodal cl-s-btn cover');
				}
				
				return false;
			}
		}
	});

	$(document).on('click', '.delivery-edit', function () {
		var shoppingUrl = '/shopping', orderGroup = $(this).attr('data-orderGroup');
		var location = window.location.href;
		if (location.indexOf('_admin') != -1) shoppingUrl = '/_admin/shopping';
		var title = '배송정보 수정';
		var name = $('#r-delivery-name').val(),
			phone = $('#r-delivery-phone').val(),
			postcode = $('#r-delivery-postcode').val(),
			addr1 = $('#r-delivery-addr1').val(),
			addr2 = $('#r-delivery-addr2').val();

		var content = '\
				<form name="d_process" method="post" action="'+shoppingUrl+'/order_delivery_change">\
					<input type="hidden" name="order_group" value="'+orderGroup+'">\
					<div class="cl-common-form-wrap mb-5 cl-common-form-half ml-0">\
						<div class="cl-common-form-group">\
							<input type="text" class="cl-common-form-control" name="name" required="required" value="'+name+'">\
							<label for="input" class="cl-common-control-label">수취인명</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap mb-5 cl-common-form-half mr-0">\
						<div class="cl-common-form-group">\
							<input type="text" class="cl-common-form-control" name="phone" required="required" value="'+phone+'">\
							<label for="input" class="cl-common-control-label">연락처</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap mb-10">\
						<div class="cl-common-form-group">\
							<input type="hidden" name="postcode" id="delivery-postcode" required="required" value="'+postcode+'">\
							<input class="cl-common-form-control" name="addr" id="delivery-addr1" required="required" onfocus="addrSearchModal(\'delivery\')" value="'+addr1+'">\
							<label for="input" class="cl-common-control-label">주소</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group">\
							<input class="cl-common-form-control" name="addr2" id="delivery-addr2" required="required" value="'+addr2+'">\
							<label for="input" class="cl-common-control-label">상세주소</label>\
						</div>\
					</div>\
					<button type="submit" class="popup-primary-btn">수정하기</button>\
					<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
				</form>\
			';
		$(this).showModalFlat(title,content,false,false,'','','', 'cl-s-delivery-info cl-cmmodal cl-s-btn cover', false ,'', '');
	});

	$(window).on('resize', function () {
		$(".close-btn-box").on('click', function () {
			$(".payment-box").fadeOut(300);
			$(".payment-popup").fadeOut(300);
			$("#delivery-box").empty();
		});

		if(window.innerWidth<768) {
			$('.pg-step-dlist span').text('보기');
			$('.firststepText span').text('확인');
		} else {
			$('.pg-step-dlist span').text('자세히 보기');
			$('.firststepText span').text('확인하기');
		}
	});

	$(document).on('click', '.exchange-btn', function () {
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');

		var orderNumberAry = [];

		var i = 0;
		$('.status-checkbox').each(function () {
			if ($(this).is(":checked") === true) {
				orderNumberAry[i] = "'"+$(this).val()+"'";
				i++;
			}
		});

		if (i < 1) {
			alert('상품을 한개 이상 선택해주세요.');
			return false;
		}

		var orderNumber = orderNumberAry.join(',');
		var status = $(this).attr('data-statusType');
		var title = '', statusCheck = '', urlCheck = '' , statusBtn = '';
		if (status == 'EY') {
			title = '교환 재발송처리';
			statusBtn = '재발송처리';
			statusCheck = 'confirm';
			urlCheck = 'd_process';
		} else if (status == 'EW') {
			title = '교환 보류설정';
			statusBtn = '설정';
			urlCheck = 'd_hold';
		} else if (status == 'EN') {
			title = '교환 거부처리';
			statusBtn = '거부처리';
			urlCheck = 'd_process';
			statusCheck = 'disavowal';
		} else if (status == 'RC') {
			title = '반품으로 변경';
			statusCheck = 'refuse';
			urlCheck = 'd_process';
			if (confirm('반품으로 변경하시겠습니까?') == true) {
				var content = '\
					<form name="d_process" method="post" action="'+shoppingUrl+'/'+urlCheck+'">\
						<input type="hidden" name="order_number" value="'+orderNumber+'">\
						<input type="hidden" name="order_group" value="'+orderGroup+'">\
						<input type="hidden" name="status" value="'+statusCheck+'">\
						<input type="hidden" name="d_status" value="E">\
					</form>\
				';
				$('body').append(content);
				document.d_process.submit();
				return false;
			} else return false;
		}
		/*var addClassSetting = 'cl-s-productSearch';*/

		if (status == 'EY' || status == 'EN') {
			var subDetailContents = (status == 'EN') ? '교환거부 상세내용': '교환 상세내용';
			var content = '\
				<form name="d_process" method="post" action="'+shoppingUrl+'/'+urlCheck+'">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="order_group" value="'+orderGroup+'">\
					<input type="hidden" name="um_id" value="">\
					<input type="hidden" name="status" value="'+statusCheck+'">\
					<input type="hidden" name="d_status" value="E">';
					if (status == 'EN') {
						content += '<h3 class="sub-order-title mt-0">상품수령여부</h3>\
						<div class="exchangeComplete-radio-box">\
							<div class="newcheckbox hand">\
								<label>\
									<input type="radio" class="cl-common-form-radio-hide" name="d_product_info" value="Y" checked>\
									<svg viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#dbdcdf" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
									</svg>\
									<svg class="active" viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#4789e7" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
										<circle fill="#4789e7" cx="9" cy="9" r="6"/>\
									</svg>\
								</label>\
								<span>수령</span>\
							</div>\
							<div class="newcheckbox hand">\
								<label>\
									<input type="radio" class="cl-common-form-radio-hide" name="d_product_info" value="N">\
									<svg viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#dbdcdf" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
									</svg>\
									<svg class="active" viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#4789e7" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
										<circle fill="#4789e7" cx="9" cy="9" r="6"/>\
									</svg>\
								</label>\
								<span>미수령</span>\
							</div>\
						</div>';
					}

					content += '<h3 class="sub-order-title exchange-disabled">배송정보</h3>\
					<div class="cl-common-form-wrap mb-10 cl-common-form-half ml-0 exchange-disabled">\
						<div class="cl-common-form-group">\
							<input type="text" class="cl-common-form-control" name="name" required="required">\
							<label for="input" class="cl-common-control-label">수취인명</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap mb-10 cl-common-form-half mr-0 exchange-disabled">\
						<div class="cl-common-form-group exchange-disabled">\
							<input type="text" class="cl-common-form-control" name="phone" required="required">\
							<label for="input" class="cl-common-control-label">휴대폰번호</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap mb-10 exchange-disabled">\
						<div class="cl-common-form-group">\
							<input type="hidden" name="postcode" id="exchange-postcode">\
							<input class="cl-common-form-control" name="addr" id="exchange-addr1" required="required" onfocus="addrSearchModal(\'exchange\')">\
							<label for="input" class="cl-common-control-label">주소</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap exchange-disabled">\
						<div class="cl-common-form-group">\
							<input class="cl-common-form-control" name="addr2" id="exchange-addr2" required="required">\
							<label for="input" class="cl-common-control-label">상세주소</label>\
						</div>\
					</div>\
					<h3 class="sub-order-title exchange-disabled">운송장번호</h3>\
					<div class="cl-s-popup-selectbox exchange-disabled">\
						<div class="cl-s-popup-selectboxWrap common-selectbox cl-s-popupDetail-selectbox ml-0">\
							<select class="selectpicker dropdown delivery-company" id="cl-detail-info-select" name="delivery_company" required="required">\
								<option value="">택배사를 선택해 주세요</option>\
								<option value="cj">CJ대한통운</option>\
								<option value="pt">우체국택배</option>\
								<option value="hj">한진택배</option>\
								<option value="lt">롯데택배</option>\
								<option value="lg">로젠택배</option>\
								<option value="cv">CVSnet 편의점택배</option>\
								<option value="cu">CU 편의점택배</option>\
								<option value="ems">EMS</option>\
								<option value="etc">자가배송</option>\
							</select>\
							<svg viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
						</div>\
						<div class="cl-common-form-wrap cl-common-form-half mr-0 delivery-number">\
							<div class="cl-common-form-group cl-exf-form-group disabled">\
								<input type="text" class="cl-common-form-control" name="delivery_number" required="required">\
								<label for="input" class="cl-common-control-label noTransition">운송장번호</label>\
							</div>\
						</div>\
					</div>\
					<h3 class="sub-order-title">'+subDetailContents+'</h3>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group input-label-hide">\
							<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
							<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
						</div>\
					</div>\
				</form>\
			';
		} else if (status == 'EW') {
			var content = '\
				<form name="d_process" method="post" action="'+shoppingUrl+'/'+urlCheck+'">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="d_status" value="E">\
					<div class="cl-common-warring">\
						<svg viewBox="0 0 13 13" width="13" height="13">\
							<path fill="#4789e7" d="M6.5 0C2.91 0 0 2.91 0 6.5S2.91 13 6.5 13 13 10.09 13 6.5 10.09 0 6.5 0zM6.5 12C3.47 12 1 9.53 1 6.5S3.47 1 6.5 1 12 3.47 12 6.5 9.53 12 6.5 12z"/>\
							<rect fill="#4789e7" x="6" y="3" width="1" height="5"/>\
							<rect fill="#4789e7" x="6" y="9" width="1" height="1"/>\
						</svg>\
						<span>교환 보류 사유를 입력한 후 구매자에게 연락하여 안내 및 협의를 진행해 주시기 바랍니다.</span>\
					</div>\
					<h3 class="sub-order-title">교환보류 사유</h3>\
					<div class="cl-s-popup-selectbox">\
						<div class="cl-s-popup-selectboxWrap common-selectbox popup-selectbox full-selectbox ml-0">\
							<select class="selectpicker dropdown" id="cl-detail-info-select" name="reason">\
								<option value="상품파손">상품파손</option>\
								<option value="배송지연">배송지연</option>\
								<option value="상품정보 상이">상품정보 상이</option>\
								<option value="오배송">오배송</option>\
								<option value="기타">기타</option>\
							</select>\
							<svg viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
						</div>\
					</div>\
					<h3 class="sub-order-title">교환보류 상세내용</h3>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group input-label-hide">\
							<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
							<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
						</div>\
					</div>\
				</form>\
			';
			//addClassSetting = '';
		}
		var exchangeModal = $(this).showModalFlat(title,content,true,true, function () {
					var f = document.d_process;

					 exchangeModal.find('.cl-common-form-wrap').each(function() {
	                var check_input = $(this).find('.cl-common-form-control'),
	                	val = check_input.val();

	                if (typeof val != 'undefined') {
	                	val = val.trim();
	                    if(val.length == 0) {
	                        $(this).removeClass('error').addClass('empty');
		                    $(this).find('.cl-common-control-label.error').remove();
	    	            }
	                } else {
	    	            if($(this).hasClass('error')) {
	        	            check_input.focus();
	            	    }
	            	}
	            });

	            if(exchangeModal.find('.cl-common-form-wrap.empty, .cl-common-form-wrap.error').length > 0) {
	                return false;
	            }
	            $.processON();

	            f.submit();
	            exchangeModal.modal('hide');
				
            },'',statusBtn, 'cl-s-change-info cl-cmmodal cl-s-btn cover', false ,'', function () {
			$('#cl-detail-info-select').selectpicker();
		});
	});
	
	/*$('#cl-detail-info-select').on('change',function(){
		console.log($(this).val());
	})*/
	$(document).on('change', '#cl-detail-info-select', function () {
		console.log($(this).val());
		if (($(this).val() == 'etc') || !$(this).val()) {
			$('.delivery-number,.delivery-number input[name="delivery_number"]').attr('readonly', true);
			$('.delivery-number .cl-common-form-group').addClass('disabled');
			$('.delivery-number .cl-common-control-label').addClass('noTransition');
			$('.delivery-number input[name="delivery_number"]').val('0000');
		} else {
			$('.delivery-number,.delivery-number input[name="delivery_number"]').attr('readonly', false);
			$('.delivery-number input[name="delivery_number"]').val('');
			$('.delivery-number .cl-common-form-group').removeClass('disabled');
			$('.delivery-number .cl-common-control-label').removeClass('noTransition');
		}
	});

	$(document).on('click', '.return-btn', function () {
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');
		var status = $(this).attr('data-statusType');

		var orderNumberAry = [];

		var escrow = $('#escrow').val();
		var tno = '';

		if (escrow == 'Y' && status == 'RY') {
			if (confirm('에스크로 결제건은 부분 반품 처리가 불가능합니다.\n계속 진행하시겠습니까?') === false) {
				return false;
			} else {
				$('.status-checkbox').each(function () {
					$(this).prop('checked', true);
				});
				tno = $('#escrow-tno').val();
			}
		}

		var i = 0;
		$('.status-checkbox').each(function () {
			if ($(this).is(":checked") === true) {
				orderNumberAry[i] = "'"+$(this).val()+"'";
				i++;
			}
		});

		if (i < 1) {
			alert('상품을 한개 이상 선택해주세요.');
			return false;
		}

		var orderNumber = orderNumberAry.join(',');
		var title = '', statusCheck = '', urlCheck = '', statusBtn = '';
		if (status == 'RY') {
			title = '';
			statusCheck = 'confirm';
			urlCheck = 'd_process';
		} else if (status == 'RW') {
			title = '반품 보류설정';
			statusBtn = '설정';
			urlCheck = 'd_hold';
		} else if (status == 'RN') {
			title = '반품 거부처리';
			statusBtn = '거부처리';
			urlCheck = 'd_process';
			statusCheck = 'disavowal';
		} else if (status == 'EC') {
			title = '교환으로 변경';
			statusCheck = 'refuse';
			urlCheck = 'd_process';
			if (confirm('교환으로 변경하시겠습니까?') == true) {
				var content = '\
					<form name="d_process" method="post" action="'+shoppingUrl+'/'+urlCheck+'">\
						<input type="hidden" name="order_number" value="'+orderNumber+'">\
						<input type="hidden" name="order_group" value="'+orderGroup+'">\
						<input type="hidden" name="status" value="'+statusCheck+'">\
						<input type="hidden" name="d_status" value="R">\
					</form>\
				';
				$('body').append(content);
				document.d_process.submit();
				return false;
			} else return false;
		}
		//var addClassSetting = 'cl-s-productSearch';

		if (status == 'RY') {
			var content = '\
				<form name="cancel_form" method="post" action="'+shoppingUrl+'/d_process">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="order_group" value="'+orderGroup+'">\
					<input type="hidden" name="tno" value="'+tno+'">\
					<input type="hidden" name="status" value="confirm">\
					<input type="hidden" name="d_status" value="R">\
					<div class="cancel-process">\
						<svg viewBox="0 0 90 90" width="90" height="90">\
							<path fill="#4789e7" d="M45 0C20.15 0 0 20.15 0 45s20.15 45 45 45c24.85 0 45-20.15 45-45S69.85 0 45 0zM45 86C22.39 86 4 67.61 4 45S22.39 4 45 4s41 18.39 41 41S67.61 86 45 86z"/>\
							<path fill="#4789e7" d="M45 34c-1.1 0-2 0.9-2 2v32c0 1.1 0.9 2 2 2 1.1 0 2-0.9 2-2V36C47 34.9 46.1 34 45 34z"/>\
							<circle fill="#4789e7" cx="45" cy="23" r="3"/>\
						</svg>';
					if (escrow == 'Y') {
						content += '<h3 class="modal-title">에스크로 반품처리 안내</h3>\
							<div class="cancel-contents">- 반품처리 시 구매자의 환불정산액에서 반품 수수료(330원)가 차감됩니다.<br>- 환불정산액은 반품처리 후 1~3영업일 후에 지급됩니다.<br>- 본 페이지에서 반품처리 시 KCP에서도 자동 취소처리됩니다.</div>';
					} else {
						content += '<h3 class="modal-title">반품처리 안내</h3>\
							<div class="cancel-contents">카드결제와 계좌이체로 주문받은 상품은 <a href="https://admin8.kcp.co.kr" target="_blank">KCP 관리자 페이지</a>를 통해 거래취소를 하셔야 하며, 무통장 입금은 환불계좌로 환불금액을 직접 입금해 주셔야 합니다.</div>';
					}
					content += '<div class="cancel-confirm-text">취소처리 하시겠습니까?</div>\
					</div>\
					<div class="btn-box">\
						<button type="submit" class="popup-primary-btn">반품 완료</button>\
						<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
					</div>\
				</form>\
				';
			//addClassSetting = '';

			$(this).showModalFlat('',content,false,false,'','','', 'cl-s-cancel-info cl-cmmodal cl-s-btn cover', false ,'', '');
			return false;
		} else if (status == 'RN') {
			var content = '\
				<form name="d_process" method="post" action="'+shoppingUrl+'/'+urlCheck+'">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="order_group" value="'+orderGroup+'">\
					<input type="hidden" name="um_id" value="">\
					<input type="hidden" name="status" value="'+statusCheck+'">\
					<input type="hidden" name="d_status" value="R">';
					if (status == 'RN') {
						content += '<h3 class="sub-order-title mt-0">상품수령여부</h3>\
						<div class="exchangeComplete-radio-box">\
							<div class="newcheckbox hand">\
								<label>\
									<input type="radio" class="cl-common-form-radio-hide" name="d_product_info" value="Y" checked>\
									<svg viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#dbdcdf" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
									</svg>\
									<svg class="active" viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#4789e7" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
										<circle fill="#4789e7" cx="9" cy="9" r="6"/>\
									</svg>\
								</label>\
								<span>수령</span>\
							</div>\
							<div class="newcheckbox hand">\
								<label>\
									<input type="radio" class="cl-common-form-radio-hide" name="d_product_info" value="N">\
									<svg viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#dbdcdf" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
									</svg>\
									<svg class="active" viewBox="0 0 18 18" width="18" height="18">\
										<path fill="#4789e7" d="M9 0C4.03 0 0 4.03 0 9c0 4.97 4.03 9 9 9s9-4.03 9-9C18 4.03 13.97 0 9 0zM9 17c-4.41 0-8-3.59-8-8 0-4.41 3.59-8 8-8s8 3.59 8 8C17 13.41 13.41 17 9 17z"/>\
										<circle fill="#4789e7" cx="9" cy="9" r="6"/>\
									</svg>\
								</label>\
								<span>미수령</span>\
							</div>\
						</div>';
					}

					content += '<h3 class="sub-order-title exchange-disabled">배송정보</h3>\
					<div class="cl-common-form-wrap mb-10 cl-common-form-half ml-0 exchange-disabled">\
						<div class="cl-common-form-group">\
							<input type="text" class="cl-common-form-control" name="name" required="required">\
							<label for="input" class="cl-common-control-label">수취인명</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap mb-10 cl-common-form-half mr-0 exchange-disabled">\
						<div class="cl-common-form-group exchange-disabled">\
							<input type="text" class="cl-common-form-control" name="phone" required="required">\
							<label for="input" class="cl-common-control-label">휴대폰번호</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap mb-10 exchange-disabled">\
						<div class="cl-common-form-group">\
							<input type="hidden" name="postcode" id="exchange-postcode">\
							<input class="cl-common-form-control" name="addr" id="exchange-addr1" required="required" onfocus="addrSearchModal(\'exchange\')">\
							<label for="input" class="cl-common-control-label">주소</label>\
						</div>\
					</div>\
					<div class="cl-common-form-wrap exchange-disabled">\
						<div class="cl-common-form-group">\
							<input class="cl-common-form-control" name="addr2" id="exchange-addr2" required="required">\
							<label for="input" class="cl-common-control-label">상세주소</label>\
						</div>\
					</div>\
					<h3 class="sub-order-title exchange-disabled">운송장번호</h3>\
					<div class="cl-s-popup-selectbox exchange-disabled">\
						<div class="cl-s-popup-selectboxWrap common-selectbox cl-s-popupDetail-selectbox ml-0">\
							<select class="selectpicker dropdown delivery-company" id="cl-detail-info-select" name="delivery_company" required="required">\
								<option value="">택배사를 선택해 주세요</option>\
								<option value="cj">CJ대한통운</option>\
								<option value="pt">우체국택배</option>\
								<option value="hj">한진택배</option>\
								<option value="lt">롯데택배</option>\
								<option value="lg">로젠택배</option>\
								<option value="cv">CVSnet 편의점택배</option>\
								<option value="cu">CU 편의점택배</option>\
								<option value="ems">EMS</option>\
								<option value="etc">자가배송</option>\
							</select>\
							<svg viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
						</div>\
						<div class="cl-common-form-wrap cl-common-form-half mr-0 delivery-number">\
							<div class="cl-common-form-group disabled">\
								<input type="text" class="cl-common-form-control" name="delivery_number" required="required">\
								<label for="input" class="cl-common-control-label noTransition">운송장번호</label>\
							</div>\
						</div>\
					</div>\
					<h3 class="sub-order-title">반품거부 상세내용</h3>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group input-label-hide">\
							<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
							<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
						</div>\
					</div>\
				</form>\
			';
		} else if (status == 'RW') {
			var content = '\
				<form name="d_process" method="post" action="'+shoppingUrl+'/'+urlCheck+'">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="d_status" value="R">\
					<div class="cl-common-warring">\
						<svg viewBox="0 0 13 13" width="13" height="13">\
							<path fill="#4789e7" d="M6.5 0C2.91 0 0 2.91 0 6.5S2.91 13 6.5 13 13 10.09 13 6.5 10.09 0 6.5 0zM6.5 12C3.47 12 1 9.53 1 6.5S3.47 1 6.5 1 12 3.47 12 6.5 9.53 12 6.5 12z"/>\
							<rect fill="#4789e7" x="6" y="3" width="1" height="5"/>\
							<rect fill="#4789e7" x="6" y="9" width="1" height="1"/>\
						</svg>\
						<span>반품 보류 사유를 입력한 후 구매자에게 연락하여 안내 및 협의를 진행해 주시기 바랍니다.</span>\
					</div>\
					<h3 class="sub-order-title">반품보류 사유</h3>\
					<div class="cl-s-popup-selectbox">\
						<div class="cl-s-popup-selectboxWrap common-selectbox popup-selectbox full-selectbox cl-s-popupDetail-selectbox ml-0">\
							<select class="selectpicker dropdown" id="cl-detail-info-select" name="reason">\
								<option value="상품파손">상품파손</option>\
								<option value="배송지연">배송지연</option>\
								<option value="상품정보 상이">상품정보 상이</option>\
								<option value="오배송">오배송</option>\
								<option value="기타">기타</option>\
							</select>\
							<svg viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
						</div>\
					</div>\
					<h3 class="sub-order-title">반품보류 상세내용</h3>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group input-label-hide">\
							<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
							<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
						</div>\
					</div>\
				</form>\
			';
			//addClassSetting = '';
		}
		var returnModal = $(this).showModalFlat(title,content,true,true, function () {

					var f = ((status == 'RN') || (status == 'RW')) ? document.d_process : ((status == 'RY') ? document.cancel_form : '');
					 	returnModal.find('.cl-common-form-wrap').each(function() {
	                var check_input = $(this).find('.cl-common-form-control'),
	                	val = check_input.val();

	                if (typeof val != 'undefined') {
	                	val = val.trim();
	                    if(val.length == 0) {
	                        $(this).removeClass('error').addClass('empty');
		                    $(this).find('.cl-common-control-label.error').remove();
	    	            }
	                } else {
	    	            if($(this).hasClass('error')) {
	        	            check_input.focus();
	            	    }
	            	}
	            });

	            if(returnModal.find('.cl-common-form-wrap.empty, .cl-common-form-wrap.error').length > 0) {
	                return false;
	            }
	            $.processON();

	            f.submit();
	            returnModal.modal('hide');
	            
            },'',statusBtn, 'cl-s-change-info cl-cmmodal cl-s-btn cover cl-s-'+status+'', false ,'', function () {
			$('#cl-detail-info-select').selectpicker();
		});
	});

	$(document).on('click', '.cl-common-form-radio-group', function () {
		$('.cl-common-form-radio-group .cl-common-form-radio').each(function () {
			$(this).find('.cl-common-radio-disable').addClass('active');
			$(this).find('.cl-common-radio-primary').removeClass('active');
			$(this).find('.cl-common-form-radio-hide').attr('checked', false);
		});

		$(this).find('.cl-common-radio-primary').addClass('active');
		$(this).find('.cl-common-radio-disable').removeClass('active');
		$(this).find('input[type=radio]').attr('checked', true);
	});

	$(document).on('click', '#cancel-confirm', function () {
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');

		var orderNumberAry = [];
		var escrow = $('#escrow').val();
		var tno = '';

		if (escrow == 'Y') {
			if (confirm('에스크로일 경우 부분 취소 완료는 불가능합니다.\n계속 진행하시겠습니까?') === false) {
				return false;
			} else {
				$('.status-checkbox').each(function () {
					$(this).prop('checked', true);
				});
				tno = $('#escrow-tno').val();
			}
		}

		var i = 0;
		$('.status-checkbox').each(function () {
			if ($(this).is(":checked") === true) {
				orderNumberAry[i] = "'"+$(this).val()+"'";
				i++;
			}
		});

		if (i < 1) {
			alert('상품을 한개 이상 선택해주세요.');
			return false;
		}

		var orderNumber = orderNumberAry.join(',');
		var content = '\
			<form name="cancel_form" method="post" action="'+shoppingUrl+'/cancel_process">\
				<input type="hidden" name="order_number" value="'+orderNumber+'">\
				<input type="hidden" name="order_group" value="'+orderGroup+'">\
				<input type="hidden" name="tno" value="'+tno+'">\
				<input type="hidden" name="status" value="confirm">\
				<div class="cancel-process">\
					<svg viewBox="0 0 90 90" width="90" height="90">\
						<path fill="#4789e7" d="M45 0C20.15 0 0 20.15 0 45s20.15 45 45 45c24.85 0 45-20.15 45-45S69.85 0 45 0zM45 86C22.39 86 4 67.61 4 45S22.39 4 45 4s41 18.39 41 41S67.61 86 45 86z"/>\
						<path fill="#4789e7" d="M45 34c-1.1 0-2 0.9-2 2v32c0 1.1 0.9 2 2 2 1.1 0 2-0.9 2-2V36C47 34.9 46.1 34 45 34z"/>\
						<circle fill="#4789e7" cx="45" cy="23" r="3"/>\
					</svg>';
				if (escrow == 'Y') {
					content += '<h3 class="modal-title">에스크로 취소처리 안내</h3>\
						<div class="cancel-contents">- 취소처리 시 구매자의 환불정산액에서 취소 수수료(330원)가 차감됩니다.<br>- 환불정산액은 취소처리 후 1~3영업일 후에 지급됩니다.<br>- 본 페이지에서 취소처리 시 KCP에서도 자동 취소처리됩니다.</div>';
				} else {
					content += '<h3 class="modal-title">취소처리 안내</h3>\
						<div class="cancel-contents">카드결제와 계좌이체로 주문받은 상품은 <a href="https://admin8.kcp.co.kr" target="_blank">KCP 관리자 페이지</a>를 통해 거래취소를 하셔야 하며, 무통장 입금은 환불계좌로 환불금액을 직접 입금해 주셔야 합니다.</div>';
				}
				content += '<div class="cancel-confirm-text">취소처리 하시겠습니까?</div>\
				</div>\
				<div class="btn-box">\
					<button type="submit" class="popup-primary-btn">취소 완료</button>\
					<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
				</div>\
			</form>\
			';
		$(this).showModalFlat('',content,false,false,'','','', 'cl-s-cancel-info cl-cmmodal cl-s-btn cover', false ,'', '');
	});

	$(document).on('click', '#cancel-disabled', function () {
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');

		var orderNumberAry = [];

		var escrow = $('#escrow').val();

		if (escrow == 'Y') {
			if (confirm('에스크로일 경우 부분 취소 거부는 불가능합니다.\n계속 진행하시겠습니까?') === false) {
				return false;
			} else {
				$('.status-checkbox').each(function () {
					$(this).prop('checked', true);
				});
			}
		}

		var i = 0;
		$('.status-checkbox').each(function () {
			if ($(this).is(":checked") === true) {
				orderNumberAry[i] = "'"+$(this).val()+"'";
				i++;
			}
		});

		if (i < 1) {
			alert('1개 이상의 상품을 선택해주세요.');
			return false;
		}

		var orderNumber = orderNumberAry.join(',');
		var title = '취소 거부처리';

		var content = '\
			<form name="cancel_form" method="post" action="'+shoppingUrl+'/cancel_disavowal">\
				<input type="hidden" name="order_number" value="'+orderNumber+'">\
				<h3 class="sub-order-title mt-0">취소거부 상세내용</h3>\
				<div class="cl-common-form-wrap">\
					<div class="cl-common-form-group input-label-hide">\
						<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
						<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
					</div>\
				</div>\
			</form>\
			';
		var cancelBackModal = $(this).showModalFlat(title,content,true,true,function () {

            var f = document.cancel_form;
            
            cancelBackModal.find('.cl-common-form-wrap').each(function() {
                var check_input = $(this).find('.cl-common-form-control'),
                	val = check_input.val();

                if (typeof val != 'undefined') {
                	val = val.trim();
                    if(val.length == 0) {
                        $(this).removeClass('error').addClass('empty');
	                    $(this).find('.cl-common-control-label.error').remove();
    	            }
                } else {
    	            if($(this).hasClass('error')) {
        	            check_input.focus();
            	    }
            	}
            });

            if(cancelBackModal.find('.cl-common-form-wrap.empty, .cl-common-form-wrap.error').length > 0) {
                return false;
            }
            $.processON();

            f.submit();
            cancelBackModal.modal('hide');

        },'','등록', 'cl-s-cancel-info cl-cmmodal cl-s-btn cover', false ,'', function () {
			$('#reason-select').selectpicker();
		});
	});

	$(document).on('click', '.status-change-btn', function () {
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');

		var orderNumberAry = [];
		var escrowCheckBoolean = false;

		var state = $(this).attr('data-type');

		var escrow = $('#escrow').val();

		if (state != 'E') {
			var msg = '배송전 취소의 경우 부분 취소가 불가능합니다. 계속 진행하시겠습니까?';
			if (status == 'R') msg = '구매 확인 후 취소의 경우 부분 취소가 불가능합니다. 계속 진행하시겠습니까?';
			if (escrow == 'Y') {
				if (confirm(msg) === true) {
					escrowCheckBoolean = true;
				} else {
					return false;
				}
			}
		}

		if (escrowCheckBoolean == false) {
			var i = 0;
			$('.status-checkbox').each(function () {
				if ($(this).is(":checked") === true) {
					orderNumberAry[i] = "'"+$(this).val()+"'";
					i++;
				}
			});

			if (i < 1) {
				alert('1개 이상의 상품을 선택해주세요.');
				return false;
			}
		} else {
			$('.status-checkbox').each(function () {
				orderNumberAry[i] = "'"+$(this).val()+"'";
			});
		}

		var orderNumber = orderNumberAry.join(',');
		var status = $(this).attr('data-statusType');
		var title = '', payInfo = $('#pay-info').attr('data-payType'),
			paybackStr = ((status == 'R') || status == 'C') ? '\
						<div class="payback-notice-text">\
							<svg class="payback-notice-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="15" height="15">\
								<path d="M6.5 0C2.91 0 0 2.91 0 6.5S2.91 13 6.5 13 13 10.09 13 6.5 10.09 0 6.5 0zM6.5 12C3.47 12 1 9.53 1 6.5S3.47 1 6.5 1 12 3.47 12 6.5 9.53 12 6.5 12z"/>\
								<rect x="6" y="3" width="1" height="5"/><rect x="6" y="9" width="1" height="1"/>\
							</svg>\
							<p>이미 결제된 상품은 결제 유형에 따라 직접 환불 처리해 주셔야 합니다.<br>\
								카드결제와 계좌이체로 결제된 상품은 <a class="payback-notice-link" href="https://admin8.kcp.co.kr" target="_blank">KCP 관리자 페이지</a>를 통해 거래취소를 하셔야 하며, 무통장 입금은 환불계좌로 환불금액을 직접 입금해 주세요.</p>\
						</div>\
						' : '';
		if (status == 'E') {
			statusName = '교환';
			title = '교환 처리';
		} else if (status == 'R') {
			statusName = '반품';
			title = '반품 처리';
		} else if (status == 'C') {
			statusName = '취소';
			title = '취소 처리';
		}

		var escrow = $('#escrow').val();

		if (escrow == 'Y' && (status == 'C' || status == 'R')) {
			var tno = $('#escrow-tno').val();
			var orderGroup = $('#order_group').val();
			var statusText = '';
			var textReturn = '<div class="escrow-return-info">- 취소처리 시 구매자의 환불정산액에서 취소 수수료(330원)가 차감됩니다.</div>\
						<div class="escrow-return-info">- 환불정산액은 취소처리 후 1~3영업일 후에 지급됩니다.</div>\
						<div class="escrow-return-info">- 본 페이지에서 취소처리 시 KCP에서도 자동 취소처리됩니다.</div>';
			if (status == 'C') {
				title = '에스크로 배송 전 취소';
				statusText = '취소';

			} else if (status == 'R') {
				if (state == 'E') {
					title = '에스크로 반품처리';
					statusText = '반품';
					textReturn = '<div class="escrow-return-info">- 반품처리 시 구매자의 환불정산액에서 반품 수수료(330원)가 차감됩니다.</div>\
								<div class="escrow-return-info">- 환불정산액은 반품처리 후 1~3영업일 후에 지급됩니다.</div>\
								<div class="escrow-return-info">- 본 페이지에서 반품처리 시 KCP에서도 자동 반품처리됩니다.</div>';
				} else {
					status = 'RS';
					title = '에스크로 배송 중 취소';
					statusText = '취소';
				}
			}
			var content = '\
				<form name="cancel_form" method="post" action="'+shoppingUrl+'/exchange_write" onsubmit="return checkCancel()">\
					<input type="hidden" name="order_group" value="'+orderGroup+'">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="d_status" value="'+status+'">\
					<input type="hidden" name="tno" value="'+tno+'">\
					<h3 class="sub-order-title">'+statusText+'사유</h3>\
					<div class="cl-common-form-wrap isborder">\
						<div class="cl-s-prSearch-selectbox">\
							<div class="cl-s-prSearch-selectboxWrap common-selectbox popup-selectbox">\
								<select class="selectpicker dropdown" id="reason-select" name="reason">';
								if (status == 'C') {
									content += '<option value="구매의사취소">구매의사취소</option>\
									<option value="다른 상품 잘못 주문">다른 상품 잘못 주문</option>\
									<option value="기타">기타</option>';
								} else {
									content += '<option value="상품파손">상품파손</option>\
									<option value="배송지연">배송지연</option>\
									<option value="상품정보 상이">상품정보 상이</option>\
									<option value="오배송">오배송</option>\
									<option value="기타">기타</option>';
								}
								content += '</select>\
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
							</div>\
						</div>\
					</div>\
					<h3 class="sub-order-title">'+statusText+' 상세사유</h3>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group input-label-hide">\
							<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
							<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
						</div>\
					</div>\
					<div class="escrow-warring bottom-escrow">\
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="15" height="15">\
							<path fill="#4789e7" d="M6.5 0C2.91 0 0 2.91 0 6.5S2.91 13 6.5 13 13 10.09 13 6.5 10.09 0 6.5 0zM6.5 12C3.47 12 1 9.53 1 6.5S3.47 1 6.5 1 12 3.47 12 6.5 9.53 12 6.5 12z"/>\
							<rect fill="#4789e7" x="6" y="3" width="1" height="5"/>\
							<rect fill="#4789e7" x="6" y="9" width="1" height="1"/>\
						</svg>\
						에스크로 환불 안내\
						'+textReturn+'\
					</div>';
					if ((status == 'R' || status == 'C') && (payInfo == '무통장 입금' || payInfo == '가상계좌') && state != 'W') {
						content += '\
							<h3 class="sub-order-title">환불계좌정보</h3>\
							<div class="cl-s-prSearch-selectbox mb-10">\
								<div class="cl-s-prSearch-selectboxWrap common-selectbox">\
									<select class="selectpicker dropdown delivery-company" id="cl-paycancel-select" name="no_bank" required="required">\
										<option value="">은행을 선택해 주세요</option>\
										<option value="88">신한은행</option>\
										<option value="03">기업은행</option>\
										<option value="04">국민은행</option>\
										<option value="11">농협은행</option>\
										<option value="90">카카오뱅크</option>\
										<option value="20">우리은행</option>\
										<option value="81">KEB하나은행</option>\
										<option value="64">산림조합</option>\
										<option value="45">새마을금고</option>\
										<option value="48">신협은행</option>\
										<option value="07">수협은행</option>\
										<option value="71">우체국</option>\
										<option value="27">한국시티은행</option>\
										<option value="23">SC제일은행</option>\
										<option value="02">산업은행</option>\
										<option value="89">케이뱅크</option>\
										<option value="37">전북은행</option>\
										<option value="35">제주은행</option>\
										<option value="34">광주은행</option>\
										<option value="39">경남은행</option>\
										<option value="31">대구은행</option>\
										<option value="32">부산은행</option>\
									</select>\
									<svg viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
								</div>\
								<div class="cl-common-form-wrap cl-common-form-half mr-0">\
									<div class="cl-common-form-group">\
										<input type="text" class="cl-common-form-control" name="no_bank_name" required="required">\
										<label for="input" class="cl-common-control-label">예금주</label>\
									</div>\
								</div>\
							</div>\
							<div class="cl-common-form-wrap mb-50">\
								<div class="cl-common-form-group">\
									<input class="cl-common-form-control" name="no_bank_number" required="required">\
									<label for="input" class="cl-common-control-label">계좌번호</label>\
								</div>\
							</div>\
						';
					}
					content += '\
					<button type="submit" class="popup-primary-btn" style="margin-top:35px;">'+statusText+' 처리</button>\
					<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
				</form>\
			';
		} else {
			var content = '\
				<form name="cancel_form" method="post" action="'+shoppingUrl+'/exchange_write" onsubmit="return checkCancel()">\
					<input type="hidden" name="order_number" value="'+orderNumber+'">\
					<input type="hidden" name="order_group" value="'+orderGroup+'">\
					<input type="hidden" name="d_status" value="'+status+'">\
				',
				statusTitle = '';
			switch(status) {
				case "E" : statusTitle = "교환"; break;
				case "R" : statusTitle = "반품"; break;
				case "C" : statusTitle = "취소"; break;
				default  : statusTitle = "취소"; break;
		}

		content += '\
					<h3 class="sub-order-title">'+statusTitle+'사유</h3>\
					<div class="cl-common-form-wrap isborder">\
						<div class="cl-s-prSearch-selectbox">\
							<div class="cl-s-prSearch-selectboxWrap common-selectbox popup-selectbox">\
								<select class="selectpicker dropdown" id="reason-select" name="reason">';
								if (status == 'C') {
									content += '<option value="구매의사취소">구매의사취소</option>\
									<option value="다른 상품 잘못 주문">다른 상품 잘못 주문</option>\
									<option value="기타">기타</option>';
								}
								else if(status == 'E') {
									content += '\
									<option value="색상 및 사이즈 변경">색상 및 사이즈 변경</option>\
                                    <option value="다른 상품 잘못 주문">다른 상품 잘못 주문</option>\
                                    <option value="상품파손">상품파손</option>\
                                    <option value="상품정보 상이">상품정보 상이</option>\
                                    <option value="오배송">오배송</option>\
                                    <option value="기타">기타</option>\
                                    ';
								}
								else if(status == 'R') {
									content += '\
									<option value="구매의사 취소">구매의사 취소</option>\
                                    <option value="다른 상품 잘못 주문">다른 상품 잘못 주문</option>\
                                    <option value="상품파손">상품파손</option>\
                                    <option value="배송지연">배송지연</option>\
                                    <option value="상품정보 상이">상품정보 상이</option>\
                                    <option value="오배송">오배송</option>\
                                    <option value="기타">기타</option>\
                                    ';
								}
					content += '</select>\
								<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
							</div>\
						</div>\
					</div>\
					<h3 class="sub-order-title">'+statusTitle+' 상세사유</h3>\
					<div class="cl-common-form-wrap">\
						<div class="cl-common-form-group input-label-hide">\
							<textarea class="cl-common-form-control shopping-textarea" name="requests" maxlength="500" required="required"></textarea>\
							<label for="input" class="cl-common-control-label">자세한 내용을 적어주세요. (500자 이내)</label>\
						</div>\
					</div>';
					if ((status == 'R' || status == 'C') && (payInfo == '무통장 입금' || payInfo == '가상계좌') && state != 'W') {
						content += '\
							<h3 class="sub-order-title">환불계좌정보</h3>\
							<div class="cl-common-form-wrap mb-10 cl-common-form-half ml-0">\
								<div class="cl-common-form-group">\
									<input type="text" class="cl-common-form-control" name="no_bank" required="required">\
									<label for="input" class="cl-common-control-label">은행명</label>\
								</div>\
							</div>\
							<div class="cl-common-form-wrap mb-10 cl-common-form-half mr-0">\
								<div class="cl-common-form-group">\
									<input type="text" class="cl-common-form-control" name="no_bank_name" required="required">\
									<label for="input" class="cl-common-control-label">예금주</label>\
								</div>\
							</div>\
							<div class="cl-common-form-wrap mb-50">\
								<div class="cl-common-form-group">\
									<input class="cl-common-form-control" name="no_bank_number" required="required">\
									<label for="input" class="cl-common-control-label">계좌번호</label>\
								</div>\
							</div>\
						';
					}
					content += '\
					<button type="submit" class="popup-primary-btn">등록</button>\
					<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
				</form>\
			';
		}
		$(this).showModalFlat(title,content,false,false,'','','', 'cl-s-cancel-info cl-cmmodal cl-s-btn cover cl-s-change-info', false ,'', function () {
			$('#reason-select').selectpicker();
			$('#cl-paycancel-select').selectpicker();
			console.log(status);
		});
	});

	$(document).on('change', '.cl-common-form-radio-hide', function () {
		if ($(this).val() == 'N') {
			$('.exchange-disabled').each(function () {
				$(this).css({'display':'none'});
				$(this).find('input').attr('required', false);
				$(this).find('select').attr('required', false);
			});
		} else {
			$('.exchange-disabled').each(function () {
				if ($(this).hasClass('cl-common-form-half') || $(this).hasClass('cl-s-popup-selectbox')) {
					$(this).css({'display':'inline-block'});
				} else {
					$(this).css({'display':'block'});
				}
				$(this).find('input').attr('required', true);
				$(this).find('select').attr('required', true);
			});
		}
	});

	$(document).on('click', '.order-change-btn', function () {
		var status = $(this).attr('data-orderSet');
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');

		var msg = '신규주문으로 변경하시겠습니까?';
		if (status == 'E') msg = '배송완료로 변경하시겠습니까?';

		if (confirm(msg) === true) {
			$.ajax({
				url: shoppingUrl+'/delivery_change',
				type: 'post',
				data: {
					'order_group': orderGroup,
					'type': status,
				},
				success: function (data) {
					location.reload();
				}
			});
		}
	});

	$(document).on('click', '.delivery-confirm-btn', function () {
		var f = document.delivery_form;

		if (f.delivery_company.value == '') {
			alert('택배사를 선택해주세요');
			f.order_group.focus();
			return false;
		}
		if (f.delivery_number.value == '') {
			alert('운송장 번호를 입력해주세요');
			f.order_group.focus();
			return false;
		}
		var checkboxLength = $('.status-checkbox').length;

		var msg = '발송처리는 부분 발송처리를 지원하지 않습니다. 전체 발송처리를 하시겠습니까?';
		if (checkboxLength <= 1) msg = '주문한 상품을 발송 처리 하시겠습니까?';
		if (confirm(msg) === true) {
			f.submit();
		}
	});

	$(document).on('click', '.no-bank-btn', function () {
		var orderGroup = $('#submit-change,#submit-change-m').attr('data-orderGroup');
		var shoppingUrl = $('#submit-change,#submit-change-m').attr('data-shoppingUrl');
		var remitter = $("#remitter-"+orderGroup).val();
		if (typeof remitter == 'undefined') {
			remitter = '-';
		}
		var noBank = $("#no-bank-"+orderGroup).val();
		var noBankNumber = $("#no-bank-number-"+orderGroup).val();
		var noBankName = $("#no-bank-name-"+orderGroup).val();
		var totalPrice = $("#total-price-"+orderGroup).val();
		var fullDate = $('#pay-full-date').text();

		var html = '\
			<form name="no_bank_form" method="post" action="'+shoppingUrl+'/no_bank_update" onsubmit="return noBankData(\''+shoppingUrl+'\')">\
				<input type="hidden" name="order_group" value="'+orderGroup+'">\
				<div class="nobank-container">\
					<div class="contents-warring">\
						<svg viewBox="0 0 13 13" width="15" height="15">\
							<path fill="#4789e7" d="M6.5 0C2.91 0 0 2.91 0 6.5S2.91 13 6.5 13 13 10.09 13 6.5 10.09 0 6.5 0zM6.5 12C3.47 12 1 9.53 1 6.5S3.47 1 6.5 1 12 3.47 12 6.5 9.53 12 6.5 12z"/>\
							<rect fill="#4789e7" x="6" y="3" width="1" height="5"/>\
							<rect fill="#4789e7" x="6" y="9" width="1" height="1"/>\
						</svg>\
						아래 계좌의 입금내역을 확인해 주세요.</div>\
					<div class="contents">\
						<table>\
							<colgroup>\
								<col width="50%">\
								<col width="50%">\
							</colgroup>\
							<thead></thead>\
							<tbody>\
								<tr>\
									<td>입금자명</td>\
									<td>'+remitter+'</td>\
								</tr>\
								<tr>\
									<td>은행</td>\
									<td>'+noBank+'</td>\
								</tr>\
								<tr>\
									<td>계좌번호</td>\
									<td>'+noBankNumber+'</td>\
								</tr>\
								<tr>\
									<td>예금주명</td>\
									<td>'+noBankName+'</td>\
								</tr>\
								<tr>\
									<td>결제금액</td>\
									<td>'+totalPrice+'</td>\
								</tr>\
								<tr>\
									<td>입금기한</td>\
									<td>'+fullDate+'</td>\
								</tr>\
							</tbody>\
						</table>\
					</div>\
					<button type="submit" class="popup-primary-btn">입금 확인 처리</button>\
					<button type="button" class="btn btn-sm cancel-btn close-button-dialog" data-dismiss="modal">닫기</button>\
				</div>\
			</form>\
		';

		$(this).showModalFlat('입금대기 정보',html,false,false,'','','', 'cl-s-nobank-info cl-cmmodal cl-s-btn cover', false ,'', '');
	});

	$(document).on('click', '#admin-memo', function () {
		if ($('.admin-memo-box').length > 0) return false;
		if ($('.admin-memo-list-box').length >= 5) {
			alert('관리자 메모는 최대 5개까지 추가할 수 있습니다.');
			return false;
		}
		var html = '\
			<div class="admin-memo-box">\
				<div class="memo-textarea">\
					<textarea id="admin-memo-textarea" placeholder="관리자만 확인할 수 있는 메모이며, 구매자에겐 전달되지 않습니다." required="required"></textarea>\
				</div>\
				<div class="admin-btn-box">\
					<div type="button" class="admin-memo-primary-btn">저장</div>\
					<div type="button" class="admin-memo-cancel-btn">취소</div>\
				</div>\
			</div>\
		';

		$('#admin-memo-list').prepend(html);
		$('#admin-memo-list').removeClass('msgFalse');
	});

	$(document).on('click', '.admin-memo-primary-btn', function () {
		if ($('#admin-memo-textarea').val() == '') {
			alert('관리자 메모를 입력해 주세요.');
			return false;
		}
		var adminMsg = $('#admin-memo-textarea').val();
		var shoppingUrl = '/shopping';
		var orderGroup = $('#admin-memo').attr('data-orderGroup');
		var location = window.location.href;
		var adminIdx = ($(this).attr('data-adminIdx') != undefined) ? $(this).attr('data-adminIdx') : '';
		var $this = $(this);

		if (location.indexOf('_admin') != -1) shoppingUrl = '/_admin/shopping';

		$.ajax({
			url: shoppingUrl + '/admin_memo',
			type: 'post',
			data: {
				'order_group': orderGroup,
				'admin_msg': adminMsg, 
				'admin_idx': adminIdx,
			}, success: function (data) {
				var json = JSON.parse(data);
				if (adminIdx) {
					$this.parent().parent().parent().children('.memo-box').children('.memo-text').html('<pre>'+json['msg']+'</pre>');
					$('.admin-memo-box.admin-memo-edit').remove();
					$('.admin-memo-edit').removeClass('admin-memo-edit');
				} else {
					json.msg = json.msg.replace('/\r\n/', '<br>');
					json.msg = json.msg.replace('/\r/', '<br>');
					json.msg = json.msg.replace('/\n/', '<br>');
					var html = '<div class="admin-memo-list-box">\
							<div class="memo-box">\
								<div class="memo-btn" data-orderGroup="'+orderGroup+'" data-adminIdx="'+json.seq+'">\
									<span class="memo-edit">\
										<svg viewBox="0 0 13 13" width="13" height="13">\
											<path fill="#96989b" d="M4.32 8.05C4.2 8.39 4.46 8.71 4.79 8.71c0.05 0 0.11-0.01 0.16-0.03L7 8l6-6 -2-2L5 6 4.32 8.05zM5.87 6.54L11 1.41 11.59 2 6.46 7.13 5.58 7.42 5.87 6.54z"/>\
											<path fill="#96989b" d="M9 11c0 0.55-0.45 1-1 1H2c-0.55 0-1-0.45-1-1V4c0-0.55 0.45-1 1-1h3V2H2C0.9 2 0 2.9 0 4v7c0 1.1 0.9 2 2 2h6c1.1 0 2-0.9 2-2V8H9V11z"/>\
										</svg>\
									</span>\
									<span class="memo-delete">\
										<svg viewBox="0 0 12 13" width="13" height="13">\
											<path fill="#96989b" d="M12 2h-1H9V0H3.02v2H1 0v1h1v8c0 1.1 0.9 2 2 2h6c1.1 0 2-0.9 2-2V3h1V2zM4.02 1H8v1H4.02V1zM10 11c0 0.55-0.45 1-1 1H3c-0.55 0-1-0.45-1-1V3h1.02H9h1V11z"/>\
											<rect fill="#96989b" x="4" y="4" width="1" height="7"/>\
											<rect fill="#96989b" x="7" y="4" width="1" height="7"/>\
										</svg>\
									</span>\
								</div>\
								<div class="memo-date">'+json['reg_date']+'</div>\
								<div class="memo-text"><pre>'+json['msg']+'</pre></div>\
							</div>\
						</div>';
					$('#admin-memo-list').prepend(html);
					$('.admin-memo-box').remove();
					$('#admin-memo-box').removeClass('msgFalse');
				}
			}
		});
	});

	$(document).on('click', '.memo-edit', function () {
		if ($('.admin-memo-box').length > 0) return false;
		var orderGroup = $(this).parent().attr('data-orderGroup'), idx = $(this).parent().attr('data-adminIdx');
		var text = $(this).parent().parent().find('.memo-text').text();

		var html = '\
			<div class="admin-memo-box admin-memo-edit">\
				<div class="memo-textarea">\
					<textarea id="admin-memo-textarea" placeholder="관리자만 확인할 수 있는 메모이며, 구매자에겐 전달되지 않습니다." required="required">'+text+'</textarea>\
				</div>\
				<div class="admin-btn-box">\
					<div class="admin-memo-primary-btn" data-adminIdx="'+idx+'">저장</div>\
					<div class="admin-memo-cancel-btn">취소</div>\
				</div>\
			</div>\
		';
		$(this).parent().parent().addClass('admin-memo-edit');
		$(this).parent().parent().parent().prepend(html);
	});

	$(document).on('click', '.memo-delete', function () {
		if (confirm('삭제한 메모는 복구가 불가능합니다.\n정말로 삭제하시겠습니까?') === true) {
			var idx = $(this).parent().attr('data-adminIdx');
			var shoppingUrl = '/shopping';
			var location = window.location.href;
			var $this = $(this);

			$.ajax({
				url: shoppingUrl + '/delete_admin_memo',
				type: 'post',
				data: {
					'admin_idx': idx,
				}, success: function (data) {
					$this.parent().parent().parent().remove();
					$('#admin-memo-list').addClass('msgFalse');
				}
			});
		}
	});

	$(document).on('click', '.admin-memo-cancel-btn', function () {
		if ($('.admin-memo-box.admin-memo-edit').length > 0) {
			$('.memo-box').removeClass('admin-memo-edit');
			$('.admin-memo-box').remove();
		} else {
			$('.admin-memo-box').remove();
		}
	});

	$(document).on('click', '#product-all-check', function () {
		if ($(this).is(":checked") === true) {
			$(".status-checkbox").each(function () {
				if ($(this).prop('disabled') !== true) $(this).prop('checked', true);
			});
		} else {
			$(".status-checkbox").each(function () {
				if ($(this).prop('disabled') !== true) $(this).prop('checked', false);
			});
		}
		/*
		var cnt = 0;
		$('.status-checkbox').each(function () {
			if ($(this).is(":checked") === true) cnt++;
		});

		$("#checkbox-count").text(cnt+"개");
		*/
	});

	$(document).on('click', '.cl-icon-returncheck', function () {			
		var haschecked = $(this).find('.cl_icon_checked02').hasClass('hide');

		if(haschecked) {
			if ($(this).parent().find('.m-status-checkbox').prop('disabled') !== true) {
				$(this).parents('.m-detail').find('input[type="checkbox"]').attr('checked', true);
				$(this).find('.cl_icon_checked02').removeClass('hide');
			}
		} else {
			if ($(this).parent().find('.m-status-checkbox').prop('disabled') !== true) {
				$(this).parents('.m-detail').find('input[type="checkbox"]').attr('checked', false);
				$(this).find('.cl_icon_checked02').addClass('hide');
			}
		}
	});

	$('.w-pc-setting-btn').click(function () {
		var f = document.pc_setting_form;
		
		var boolean = checkChangeCLFooter('pc');

		if (boolean) f.submit();
	});

	$('.pc-setting-btn').click(function () {
		var f = document.setting_form;
		var location = window.location.href;
		if (location.indexOf('setting/E') != -1) {
			var boolean = emailLineFunc();

			if (boolean == false) return false;
		}

		if (location.indexOf('setting/P') != -1) {
			if ($('#no-bank').is(':checked') === true) {
				var boolean = noBankCheck();
				if (boolean == false) return false;
			}
		}
		f.submit();
	});

	//pg-modal 공통
	function linkPG (quantity) {
		if(window.location.href.indexOf('gabia') > -1) {
			window.open("https://admin8.kcp.co.kr/hp.HomePageAction.do?cmd=apply&host_id=가비아(크리에이터링크)", '', 'width=1000px,height=800px');
		} else {
			if (quantity <= 1) {
				window.open("https://admin8.kcp.co.kr/hp.HomePageAction.do?cmd=apply&host_id=(주) 크리에이터링크", '', 'width=1000px,height=800px');			
			} else {
				window.open("https://admin8.kcp.co.kr/hp.HomePageAction.do?cmd=apply&host_id=(주)크리에이터링크_유료형", '', 'width=1000px,height=800px');	
			}
		}
	}

	var isgabia = (window.location.href.indexOf('gabia') > -1) ? true : false;

	$('.pg-btn').live('click', function() {
		var manageText = isgabia ? '솔루션 관리툴' : '관리자 페이지';
		var quantity = $(this).attr('data-quantity')
		var is_shoppingeventUrl = window.location.href.indexOf('shoppingevent') > -1,
			title = "전자결제 서비스 신청",
			str = '\
				<div class="row pg-wrap">\
					<div class="col-xs-12 col-sm-12 col-md-12 clearfix pg-header">\
						<div class="col-xs-6 col-sm-6 col-md-6 no-padding kcp-logo">\
							<div class="img-wrap"><img src="//storage.googleapis.com/i.addblock.net/shopping_mall/kcp_logo.png" alt="kcp logo" class="img-responsive" /></div>\
						</div>\
						<div class="col-xs-6 col-sm-6 col-md-6 no-padding kcp-info">\
							<p>가입문의 전화상담<br><span class="tel">1544-8662</span></p>\
						</div>\
					</div>\
					<div class="col-xs-12 col-sm-12 col-md-12 clearfix pg-body no-padding">\
						<div class="pg-title">서비스 기본사항</div>\
						<div class="pg-content">\
							<dl>\
								<dt>초기가입비</dt>\
								<dd>';
								var text1 = isgabia ? '면제 / 연회비 평생 무료' : '면제(쇼핑 요금제 1년 이상 결제 시) 또는 220,000원(VAT 포함)/연회비 평생 무료';
			str = str +	text1 + '\
								</dd>\
							</dl>\
							<dl>\
								<dt>카드수수료</dt>\
								<dd>';
								var text2 = isgabia ? '3.4%' : '3.3%';									 
			str = str +	text2 + '(카드사 수수료 포함, VAT 별도)\
								</dd>\
							</dl>\
							<dl>\
								<dt>계좌이체</dt>\
								<dd>\
									가입비 무료, 실시간 계좌이체 1.8% 외 추가 수수료 없음 (VAT 별도)\
								</dd>\
							</dl>\
							<dl>\
								<dt>휴대폰결제</dt>\
								<dd>';
								var text3 = isgabia ? '4.0%' : '3.5%';									 
			str = str +	'\
									별도 가입필요 (가입비: 10만원(VAT 별도), 실물 '+text3+', 컨텐츠 7%, VAT 별도)\
								</dd>\
							</dl>\
							<dl  class="pb-0">\
								<dt>정산주기</dt>\
								<dd>';
								var text4 = isgabia ? '일정산 7일 (승인후 7일 후 매일 정산)' : '월 4회 정산 (정산 지급일이 토/일/공휴일인 경우 다음날 지급)';			
			str = str +	text4 + '\
								</dd>\
							</dl>\
						</div>\
						<div class="pg-title">가입절차</div>\
						<div class="pg-content pg-step">\
							<dl>\
								<dt>1단계 <br class="hidden-xs">심사불가업종 확인</dt>\
								<dd>\
									<p class="mobileWidth">- 카드사별 심사불가 업종을 확인합니다.\
										<a class="pg-modal-detailbtn firststepText" href="http://www.kcp.co.kr/common.popup.do?cmd=unacceptbiz" target="_blank">\
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12">\
												<polygon points="10 11 1 11 1 2 5 2 5 1 0 1 0 12 11 12 11 7 10 7 "/>\
												<polygon points="7 0 7 1 8 1 10.29 1 5.15 6.15 5.85 6.85 11 1.71 11 4 11 5 12 5 12 0 "/>\
											</svg>\
											<span>확인하기</span>\
										</a>\
									</p>\
									<p class="point">* 카드사별 심사불가업종 및 특이사항을 사전 확인하지 않아서 발생하는 문제에 대해서는 크리에이터링크가 책임을 지지 않습니다.</p>\
								</dd>\
							</dl>\
							<dl>\
								<dt>2단계 <br class="hidden-xs">상점준비</dt>\
								<dd>\
									<p>- 홈페이지는 쇼핑몰로서 최소한의 디자인을 갖춰야 합니다.</p>\
									<p>- 홈페이지 생성 후, 상품을 3개 이상 등록합니다.</p>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 상품 상세 페이지에는 배송정보, 환불규정이 기재되어야 합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox1" aria-expanded="true" aria-controls="detailBox1">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox1">\
										<p>1. 상품 상세 페이지의 빈 영역을 클릭해 블럭을 추가합니다.&nbsp;(텍스트 블럭 추천)</p>\
										<p>2. 텍스트 블럭에 배송정보와 교환/환불규정을 입력합니다.</p>\
										<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img01.jpg" class="img-responsive">\
										<p class="example-text">(예시 이미지)</p>\
										<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox1" aria-expanded="true" aria-controls="detailBox1">\
											<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
										</div>\
										</div>\
									</div>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 법적 필수정보를 입력합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox2" aria-expanded="true" aria-controls="detailBox2">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox2">\
											<p><span class="pgBold">'+manageText+' > 쇼핑 > 쇼핑설정 > 법적 필수정보 메뉴</span>에서 법적 필수 정보를 입력할 수 있습니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img02.jpg" class="img-responsive">\
											<ul>\
												<li>\
													<span class="detail-num">①</span>\
													<div><span class="pgBold">사업자 등록번호</span> : 사업자 등록번호를 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">②</span>\
													<div><span class="pgBold">상호 또는 법인명</span> : 상호 또는 법인명을 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">③</span>\
													<div><span class="pgBold">대표자</span> : 대표자명을 입력합니다.\
													</div>\
												</li>\
												<li>\
													<span class="detail-num">④</span>\
													<div><span class="pgBold">개인정보 관리 책임자</span> : 개인정보 관리 책임자 이름을 입력합니다.<div>\
												</li>\
												<li>\
													<span class="detail-num">⑥</span>\
													<div><span class="pgBold">통신판매업 신고번호</span> : 5단계에서 통신판매업 신고 후 통신판매업 신고번호를 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">⑥</span>\
													<div><span class="pgBold">통신판매사업자 상세조회 링크 주소</span> : 통신판매업 신고 현황을 확인할 수 있는 링크입니다. 사업자 등록번호를 입력하면 자동으로 링크가 생성됩니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">⑦</span>\
													<div><span class="pgBold">사업장 주소</span> : 사업장 주소를 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">⑧</span>\
													<div><span class="pgBold">대표전화</span> : 사업장 대표 전화번호를 입력합니다.<br>\
													<span class="emphasistext">* PG 신청 시에는 휴대전화 번호를 이용하실 수 없습니다.</span></div>\
												</li>\
												<li>\
													<span class="detail-num">⑨</span>\
													<div><span class="pgBold">대표 이메일</span> : 사업장 대표 이메일을 입력합니다.</div>\
												</li>\
												<li>※ 법적 필수정보는 입력 후 <span class="pgBold">저장하기</span> 버튼을 클릭하면 홈페이지 푸터에 법적 필수정보가 자동으로 입력됩니다.</li>\
											</ul>\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox2" aria-expanded="true" aria-controls="detailBox2">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 결제 정보를 입력합니다.<br>(PG사 승인을 받기 위해 무통장 입금과 비회원 구매가 활성화 되어있어야 합니다.)\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox3" aria-expanded="true" aria-controls="detailBox3">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox3">\
											<p><span class="pgBold">'+manageText+' > 쇼핑 > 쇼핑설정 > 결제 메뉴</span>에서 입력할 수 있습니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img03.jpg" class="img-responsive">\
											<ul>\
												<li>\
													<span class="detail-num">①</span>\
													<div><span class="pgBold">사용할 결제 수단</span> : 상품 판매 시 사용할 결제수단을 선택합니다.\
													<br>* 신용카드와 계좌이체는 PG 키 값이 적용되어 있어야 선택이 가능합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">②</span>\
													<div><span class="pgBold">과세 유형</span> : PG사에 신청한 과세 유형으로 선택합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">③</span>\
													<div><span class="pgBold">전자결제(PG) 설정</span> : 전자결제(PG) 서비스 신청 및 PG사 승인 후 발급된 PG 키 값을 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">④</span>\
													<div><span class="pgBold">무통장 입금 설정</span> : 무통장 입금을 이용 시, 구매자에게 안내할 계좌 정보를 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">⑤</span>\
													<div><span class="pgBold">비회원 구매</span> : 비회원으로 구매 가능 여부를 선택합니다.</div>\
												</li>\
												<li>※ PG사 승인을 받기 위해 <span class="pgBold">무통장 입금</span>과 <span class="pgBold">비회원 구매</span>가 활성화 되어있어야 합니다.</li>\
											</ul>\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox3" aria-expanded="true" aria-controls="detailBox3">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 배송 정보를 입력합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox4" aria-expanded="true" aria-controls="detailBox4">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox4">\
											<p><span class="pgBold">'+manageText+' > 쇼핑 > 쇼핑설정 > 배송 메뉴</span>에서 입력할 수 있습니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img04.jpg" class="img-responsive">\
											<ul>\
												<li>\
													<span class="detail-num">①</span>\
													<div><span class="pgBold">택배회사</span> : 상품 운송을 담당할 택배 업체를 선택합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">②</span>\
													<div><span class="pgBold">배송비</span> : 기본 배송비 결제 방식 선택 및 기본 배송비를 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">③</span>\
													<div><span class="pgBold">도서산간지역 추가 배송비</span> : 도서산간지역 배송 시 추가될 배송비를 입력합니다.</div>\
												</li>\
												<li>\
													<span class="detail-num">④</span>\
													<div><span class="pgBold">배송비 무료조건</span> : 배송비 무료조건 설정 사용여부 및 최소 구매 금액을 입력합니다.</div>\
												</li>\
											</ul>\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox4" aria-expanded="true" aria-controls="detailBox4">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 이용약관, 개인정보 처리방침을 입력합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox5" aria-expanded="true" aria-controls="detailBox5">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox5">\
											<p><span class="pgBold">'+manageText+' > 상세설정 > 부가기능 > 회원가입 기능 메뉴</span>에서 입력할 수 있습니다</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img05.jpg" class="img-responsive">\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox5" aria-expanded="true" aria-controls="detailBox5">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
								</dd>\
							</dl>\
							<dl>\
								<dt>3단계 <br class="hidden-xs">PG이용 신청</dt>\
								<dd>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- PG 신청 시 필요한 서류를 준비합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox6" aria-expanded="true" aria-controls="detailBox6">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox6">\
											<table class="pgTable mt-40">\
											  <tr>\
												<th class="pgTable-title bdR">개인사업자</th>\
												<th class="pgTable-title">법인사업자</th>\
											  </tr>\
											  <tr>\
												<td class="pgTable-contents bdR">전자결제 대행계약서 원본</td>\
												<td class="pgTable-contents ">전자결제 대행계약서 원본</td>\
											  </tr>\
											  <tr>\
												<td class="pgTable-contents bdR">사업자 등록증 사본</td>\
												<td class="pgTable-contents ">사업자 등록증 사본</td>\
											  </tr>\
											  <tr>\
												<td class="pgTable-contents bdR">정산 받을 통장 사본</td>\
												<td class="pgTable-contents ">법인인감증명서 원본<br>(3개월 이내 발급한 서류만 취급)</td>\
											  </tr>\
											  <tr>\
												<td class="pgTable-contents bdR">대표자 신분증 전면/후면 사본<br><span class="pg_emphasis">(주민번호 뒷자리 표시)</span></td>\
												<td class="pgTable-contents ">법인등기부증명서 원본<br>(3개월 이내 발급한 서류만 취급<br><span class="pg_emphasis">/ 주민번호 뒷자리 마스킹 처리</span>)</td>\
											  </tr>\
											  <tr>\
												<td class="pgTable-contents bdR">소유자 확인서류</td>\
												<td class="pgTable-contents ">정산 받을 통장 사본</td>\
											  </tr>\
											  <tr>\
												<td class="pgTable-contents bdR"></td>\
												<td class="pgTable-contents ">소유자 확인서류</td>\
											  </tr>\
											</table>\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox6" aria-expanded="true" aria-controls="detailBox6">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- '+manageText+' > 쇼핑 > 쇼핑설정 > 결제 메뉴에서 신청하기 버튼을 통해 온라인 신청서를 제출합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox7" aria-expanded="true" aria-controls="detailBox7">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox7">\
											<p>1. <span class="pgBold">'+manageText+' > 쇼핑 > 쇼핑설정 > 결제 메뉴</span>로 이동 후 <br class="hidden-xs"><span class="pgBold">전자결제 서비스 신청하기</span> 버튼을 클릭합니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img07_1.jpg" class="img-responsive">\
											<p class="marginControl">2. 화면 하단의 <span class="pgBold">KCP 전자결제 서비스 신청</span> 버튼을 클릭합니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img07_2.jpg" class="img-responsive">\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox7" aria-expanded="true" aria-controls="detailBox7">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<p>- 판매 상품이 비과세 또는 복합과세(과세 + 비과세)인 경우 별도로 기타사항에 명시해야 합니다.</p>\
									<p>- 신청이 완료되면 2 ~ 3 영업일 이내에 PG 담당자가 연락 드립니다.</p>\
									<p>(접수 이후의 진행 상황은 KCP 고객센터로 문의하시면 정확한 답변을 받으실 수 있습니다.)</p>\
								</dd>\
							</dl>\
							<dl>\
								<dt>4단계 <br class="hidden-xs">PG 및 카드사 심사</dt>\
								<dd>\
									<p>- 심사는 통상 2~3주가 소요됩니다. (카드사 심사 중엔 결제해도 과금이 되지 않습니다.)</p>\
									<p>- 심사가 완료되면 상점 ID 및 키 값을 메일로 전달받습니다.</p>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 해당 키 값을 '+manageText+' > 쇼핑 > 쇼핑설정 > 결제 메뉴에서 키 값 설정란에 입력합니다.\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox8" aria-expanded="true" aria-controls="detailBox8">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox8">\
											<p>1. 심사 완료 후 전달받은 안내 메일의 <span class="pgBold">SITE CODE</span>와 <span class="pgBold">SITE KEY</span>를 확인합니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img08_1.jpg" class="img-responsive">\
											<p class="marginControl">2. <span class="pgBold">'+manageText+' > 쇼핑 > 설정 > 결제 메뉴</span>로 이동하여,<br class="hidden-xs">키 값 입력란에 <span class="pgBold">SITE CODE, SITE KEY</span>로 구분지어 삽입합니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img08_2.jpg" class="img-responsive">\
											<p class="marginControl">3. <span class="pgBold">저장하기</span> 버튼을 클릭하여 저장합니다.</p>\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox8" aria-expanded="true" aria-controls="detailBox8">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
								</dd>\
							</dl>\
							<dl>\
								<dt>5단계 <br class="hidden-xs">통신판매업신고</dt>\
								<dd>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">통신판매업 신고시 필요한 정보\
												<span class="pg-modal-detailbtn hand" data-toggle="collapse" data-target="#detailBox9" aria-expanded="true" aria-controls="detailBox9">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox9">\
											<table class="pgTable">\
										  		<tr>\
													<th class="pgTable-title">통신판매업 신고시 필요한 정보</th>\
											  	</tr>\
											  	<tr>\
													<td class="pgTable-contents">신분증 / 사업자 등록증</td>\
											  	</tr>\
											  	<tr>\
													<td class="pgTable-contents">쇼핑몰 도메인(인터넷 쇼핑몰 주소)</td>\
											  	</tr>\
											  	<tr>\
													<td class="pgTable-contents">호스트 서버 소재지(서울특별시 서초구 방배동 931번지 9호)</td>\
											  	</tr>\
											  	<tr>\
													<td class="pgTable-contents">에스크로 이체 확인증(구매안전 서비스 이용 확인증) : PG가입절차 중 PG사에서 제공</td>\
											  	</tr>\
											</table>\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox9" aria-expanded="true" aria-controls="detailBox9">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<p class="mt-40">신고 방법</p>\
									<div class="pg-step-dlist-wrap">\
										<div class="pg-step-dlist">\
											<p class="mobileWidth">- 정부24 홈페이지에서 온라인 신고\
												<span class="pg-modal-detailbtn pgdetailbtn hand" data-toggle="collapse" data-target="#detailBox10" aria-expanded="true" aria-controls="detailBox10">자세히&nbsp;보기</span>\
											</p>\
										</div>\
										<div class="pg-content-detailWrap collapse" id="detailBox10">\
											<p>1. <a href="http://www.gov.kr/main?a=AA020InfoCappViewApp&HighCtgCD=A09006&CappBizCD=11300000006&tp_seq=01" target="_blank">정부24 홈페이지</a>에 접속합니다.</p>\
											<p>2. 로그인 합니다.</p>\
											<p>3. <span class="pgBold">신청하기</span> 버튼을 클릭합니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img10_1.jpg" class="img-responsive">\
											<p class="marginControl">4. 필요한 정보들을 모두 작성 후 <span class="pgBold">민원신청하기</span> 버튼을 클릭하여 신청합니다.</p>\
											<p>* [신고증 수령기관]은 추후에 신고증 수령을 위해 방문해야 할 공공기관을 의미합니다.</p>\
											<img src="//storage.googleapis.com/i.addblock.net/shopping_mall/pg_img10_2.jpg" class="img-responsive">\
											<div class="pg-close-wrap" data-toggle="collapse" data-target="#detailBox10" aria-expanded="true" aria-controls="detailBox10">\
												<svg xmlns="http://www.w3.org/2000/svg" class="slideUp_btn" viewBox="0 0 23 13" width="23" height="13"><polygon points="11.5 0 0 12 1 13 11.52 1.98 22.02 13 23 12.02 "/></svg>\
											</div>\
										</div>\
									</div>\
									<p>- 신고 관련 서류를 지참하여 구청에 직접 방문신고</p>\
									<p>온라인 등록 또는 직접 방문 중 한가지 방법으로 신청 후, 4~5일 후 신고증 수령기관에 방문하여\
									면허세 40,500원을 납부하시면 통신판매업 신고증을 수령하실 수 있습니다.</p>\
								</dd>\
							</dl>\
						</div>\
					</div>\
				</div>\
			';

		var applyLinkPG = function() {linkPG(quantity);},
			buttonfalse = (is_shoppingeventUrl) ? false : true,
			ligkPG = (is_shoppingeventUrl) ? '' : applyLinkPG,
			cancel = (is_shoppingeventUrl) ? '' : '취소',
			confirm = (is_shoppingeventUrl) ? '확인' : 'KCP 전자결제 서비스 신청',
			pgmodalAddClass = (is_shoppingeventUrl) ? 'pg-modal cl-modal pg-event cl-s-btn cover' : 'pg-modal cl-modal cl-s-btn cover';
			
		var pgInfoModal = $(this).showModalFlat(title,str,true,buttonfalse,ligkPG,cancel,confirm,pgmodalAddClass, false ,'',function() {
				$('.pg-content-detailWrap').on('show.bs.collapse',function(e){
					if(($(this).attr('id') !== 'detailBox5') && ($(this).attr('id') !== 'detailBox8')) $(this).append('<div class="marginBox"></div>');
					if(($(this).attr('id') == 'detailBox9') || ($(this).attr('id') == 'detailBox6')) $(this).prev().addClass('fdetailbtn');
				});
				$('.pg-content-detailWrap').on('hidden.bs.collapse',function(e){
					$(this).find('.marginBox').remove();
					$(this).prev().removeClass('fdetailbtn');
				});
				if(window.innerWidth<768) {
					$('.pg-step-dlist span').text('보기');
					$('.firststepText span').text('확인');
				}
			});		
	});
	
	$("#product-plus-button").on('click', function () {
		var idx = $(this).attr('data-idx'),
			start_date = $(this).attr('data-startDate'),
			end_date = $(this).attr('data-endDate'),
			selector = $(this).attr('data-selector'),
			search_text = $(this).attr('data-searchText'),
			idx = $(this).attr('data-idx'),
			shopping_url = $(this).attr('data-shoppingUrl'),
			page_check = $(this).attr('data-page');

		var location = window.location.href;

		$.ajax({
			url: ''+shopping_url+'/product_search_more/'+page_check+'',
			type: 'post',
			dataType: 'json',
			data: {
				'start_limit': idx,
				'start_date': start_date,
				'end_date': end_date,
				'selector': selector,
				'search_text': search_text,
			},
			success: function (data) {
				if (data['list'] == 'none') {
					$("#product-plus-button").fadeOut(0);
					alert('더이상 리스트가 존재하지 않습니다.');
					return false;
				}

				var html = '';
				for (var i=0;i<=data.product_cnt;i++) {
					if (!data['list'][i]) continue;
					else {
						if (data['list'].length <= 0) continue;
					}

					if (data['list'][i]['payment_info']['return_bank_data']) {
						var returnBank = data['list'][i]['payment_info']['return_bank_data'].split("||");
							if (page_check == 'order_d' || page_check == 'order_f') {
								html += '<tr>';
							} else {
								html += '<tr onclick="paymentConfig(\''+data['list'][i]['order_group']+'\', \''+data['list'][i]['status_check']+'\', \''+shopping_url+'\')">';
							}
							html += '<input type="hidden" id="remitter-'+data['list'][i]['order_group']+'" value="'+returnBank[0]+'">';
							html += '<input type="hidden" id="return-bank-'+data['list'][i]['order_group']+'" value="'+returnBank[1]+'">';
							html += '<input type="hidden" id="return-bank-name-'+data['list'][i]['order_group']+'" value="'+returnBank[2]+'">';
							html += '<input type="hidden" id="return-bank-number-'+data['list'][i]['order_group']+'" value="'+returnBank[3]+'">';
							html += '<input type="hidden" id="no-bank-'+data['list'][i]['order_group']+'" value="'+data['list'][i]['payment_info']['no_bank']+'">';
							html += '<input type="hidden" id="no-bank-number-'+data['list'][i]['order_group']+'" value="'+data['list'][i]['payment_info']['no_bank_number']+'">';
							html += '<input type="hidden" id="no-bank-name-'+data['list'][i]['order_group']+'" value="'+data['list'][i]['payment_info']['no_bank_name']+'">';
							html += '<input type="hidden" id="total-price-'+data['list'][i]['order_group']+'" value="'+number_format(data['list'][i]['payment_info']['payment'])+'원">';
					} else {
						if (page_check == 'order_d' || page_check == 'order_f') {
							html += '<tr>';
						} else {
							html += '<tr onclick="paymentConfig(\''+data['list'][i]['order_group']+'\', \''+data['list'][i]['status_check']+'\', \''+shopping_url+'\')">';
						}
					}
					if (page_check == 'order_d' || page_check == 'order_f') {
						html += '<td onclick="paymentConfig(\''+data['list'][i]['order_group']+'\', \''+data['list'][i]['status_check']+'\', \''+shopping_url+'\')" class="imgblock"><img src="'+data['list'][i]['product_image']+'"></td>';
						html += '<td onclick="paymentConfig(\''+data['list'][i]['order_group']+'\', \''+data['list'][i]['status_check']+'\', \''+shopping_url+'\')" class="text-center">'+data['list'][i]['product_name']+'';
					} else {
						html += '<td class="imgblock"><img src="'+data['list'][i]['product_image']+'"></td>';
						html += '<td class="text-center">'+data['list'][i]['product_name']+'';
					}
					html += '<div class="order-mobile-status">'+data['list'][i]['m_de_status']+'';
					html += '<span class="f-right">'+number_format(data['list'][i]['price'])+'원</span>';
					html += '</div></td>';
					html += '<td>'+data['list'][i]['order_group']+'</td>';
					html += '<td>'+data['list'][i]['pireg']+'</td>';
					html += '<td>'+data['list'][i]['mb_name']+'</td>';
					if (location.indexOf('_df') == -1 && 
						location.indexOf('_ef') == -1 && 
						location.indexOf('cancel') == -1 && 
						location.indexOf('return') == -1 && 
						location.indexOf('exchange') == -1 &&
						location.indexOf('cancel_f') == -1 && 
						location.indexOf('return_f') == -1 && 
						location.indexOf('exchange_f') == -1
					) {
						if (location.indexOf('order_f') != -1 || location.indexOf('order_d') != -1) html += '<td class="ta-right" style="padding-right:32px;" onclick="deliverySearchClick(\''+data['list'][i]['delivery_company']+'\', \''+data['list'][i]['delivery_number']+'\')"><span class="c-black">'+data['list'][i]['company']+'</span><br><span class="c-blue">'+data['list'][i]['number']+'</span></td>';
						else  html += '<td>'+data['list'][i]['de_status']+'</td>';
					}
					html += '</tr>';
				}
				
				$("#product-plus-button").attr('data-idx', (idx * 1) + 1);
				if (data['list'].length < 12) {
					$("#product-plus-button").fadeOut(0);
				}
				$('#list').append(html);
			}
		});
	});

	$(document).on('click', '.qna-box,.review-box', function () {
		var qnaSeq = $(this).attr('data-seq'),
			qnaRpage = ($(this).find('.qna').attr('data-rpage')) ? $(this).find('.qna').attr('data-rpage')+'-box' : '';
		$(".qnaR-contents").not("#qna-contents-"+qnaSeq).hide();

		if ($("#qna-contents-"+qnaSeq).css('display')=='block') $("#qna-contents-"+qnaSeq).hide();
		else $("#qna-contents-"+qnaSeq).show();
	});

	$(document).on('click', '.mobile-qna-box', function () {
		var qnaSeq = $(this).attr('data-seq');

		$(".m-qna-contents").not("#m-qna-contents-"+qnaSeq).hide();

		if ($("#m-qna-contents-"+qnaSeq).css('display') === 'block') $("#m-qna-contents-"+qnaSeq).hide();
		else $("#m-qna-contents-"+qnaSeq).show();
	});

	$(document).on('click', '.payment-box-subject svg.close', function () {
		$(".payment-box").fadeOut(300);
	});

	$(document).on('click', '.connect-guide', function () {
		var mobile = (window.innerWidth<768) ? 'm.' : '',
			str = '\
				<div class="guide-top">\
					<h3 class="modal-title guidetitle">'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.title']+'</h3>\
					<div class="guide-menu">\
						<ul>';
						for (var i=0;i<4;i++) {
							var menuactive = (i==0) ? 'active' : '';
							str = str + '<li class="hand '+menuactive+'">';
							if(i==3) str = str + '<div class="line left"></div>';
							else if(i==1 || i==2) {
								str = str +'\
									<div class="line left"></div>\
									<div class="line right"></div>\
								';	
							}
							str = str + '<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.'+mobile+i]+'</p>';
							if(i==0) str = str + '<div class="line right"></div>';
							str = str + '</li>';
						};
			str = str + '\
						</ul>\
					</div>\
				</div>\
				<div class="guide-wrap">\
					<div class="step">\
						<div id="step1">\
							<h3>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.1.title']+'</h3>\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.1.1.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img01_1.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.1.2.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img01_2.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.1.3.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img01_3.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.1.4.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img01_4.jpg">\
						</div>\
						<div id="step2">\
							<h3>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.2.title']+'</h3>\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.2.1.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img02_1.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.2.2.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img02_2.jpg">\
						</div>\
						<div id="step3">\
							<h3>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.title']+'</h3>\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.1.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img03_1.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.2.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img03_2.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.3.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img03_3.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.4.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img03_4.jpg">\
							<p class="mb-0">'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.5.contents']+'</p>\
							<p class="mt-0">'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.3.6.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img03_5.jpg">\
						</div>\
						<div id="step4">\
							<h3>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.4.title']+'</h3>\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.4.1.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img04_1.jpg">\
							<p class="mb-0">'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.4.2.contents']+'</p>\
							<p class="mt-0">'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.4.3.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img04_2.jpg">\
							<p>'+$.lang[LANG]['dashboard.kakaotalk.notice.guide.step.4.4.contents']+'</p>\
							<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/kakao/kakaoguide_img04_3.jpg">\
						</div>\
					</div>\
					<div class="modal-footer guideClose">\
						<button type="button" class="btn btn-default btn-sm close-button-dialog clostbtnfalse" data-dismiss="modal">닫기</button>\
					</div>\
				</div>\
				';
												
		var shopguideModal = $(this).showModalFlat('',str,true,false,'','close','','guidePopup cl-cmmodal cl-s-btn cover w700 kakao-guide-modal', false ,'',function() {
			$.guidePopup.scrollevent();
		});
	});	
	
	$('.payment-popup').click(function(e){
		if($(e.target).parents('.payment-box').length==0) {
			$('#product-all-check').remove();
			$(".payment-box").fadeOut(300);
			$(".payment-popup").fadeOut(300);
			$("#delivery-box").empty();
		}
	});
});

function orderExcel (val) {
	document.excel_form.type.value = val;
	document.excel_form.submit();
}

function searchValidate () {
	var f = document.search_form;

	f.submit();

	/*
	$.ajax({
		url: '<?=$shopping_url?>/product_search',
		type: 'post',
		//dataType: 'json',
		data: {
			'start_date': f.start_date.value,
			'end_date': f.end_date.value,
			'status': f.status.value,
			'selector': f.selector.value,
			'search_text': f.search_text.value,
		},
		success: function (data) {
			console.log(data);
			var html = '';
			for (var i=0;i<data['list'].length;i++) {
				var list = data['list'][i];
				html += '<tr onclick="paymentConfig(\''+list['order_group']+'\')">';
				html += '<td><img src="'+list['product_image'][0]+'"></td>';
				html += '<td class="text-center">'+list['product_name']+'</td>';
				html += '<td>'+list['reg_date']+'</td>';
				html += '<td>'+list['mb_name']+'</td>';
				html += '<td>'+list['de_status']+'</td>';
				html += '</tr>';
			}

			$("#list").html(html);
		}
	});
	*/

}
function cancelSubmit () {
	var f = document.e_write_form;

	var text = '취소';
	if (f.title.value == '') {
		alert(text+' 사유를 선택해주세요.');
		return false;
	}
	if (f.requests.value == '') {
		alert(text+' 사유를 입력해주세요.');
		return false;
	}

	f.submit();
}

function search(shopping_url,page_check) {
	var prsearchPeriod = ['today','1week','1mon','3mon','6mon','1year'],
		prsearchWord = ['buyer','phone','delivery_number','product_name','order_group','product_number'],
		prSearch_str = '\
			<form name="search_form" method="post" action="'+shopping_url+'/product_search/'+page_check+'" class="">\
				<h3 class="sub-order-title">'+$.lang[LANG]['shopping.dashboard.list.searchModal.schPeriod']+'</h3>\
				<div class="change-date-box">\
					<div id="site-visit-start-wrap" class="input-group">\
						<input id="site-visit-start" type="text" class="form-control" name="start_date" aria-describedby="site visit start date">\
						<span class="site-visit-datetext" id="site-visit-start-datetext"></span>\
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 16" width="14" height="16">\
							<path d="M12 2h-1V1c0-0.55-0.45-1-1-1S9 0.45 9 1v1H5V1c0-0.55-0.45-1-1-1S3 0.45 3 1v1H2C0.9 2 0 2.9 0 4v10c0 1.1 0.9 2 2 2h10c1.1 0 2-0.9 2-2V4C14 2.9 13.1 2 12 2zM12 15H2c-0.55 0-1-0.45-1-1V6h12v8C13 14.55 12.55 15 12 15z"/>\
							<rect x="3" y="8" width="2" height="2"/><rect x="6" y="8" width="2" height="2"/>\
							<rect x="9" y="8" width="2" height="2"/><rect x="3" y="11" width="2" height="2"/>\
							<rect x="6" y="11" width="2" height="2"/><rect x="9" y="11" width="2" height="2"/>\
						</svg>\
					</div>\
					<span class="fa"></span>\
					<div id="site-visit-end-wrap" class="input-group">\
						<input id="site-visit-end" type="text" class="form-control" name="end_date" aria-describedby="site visit end date">\
						<span class="site-visit-datetext" id="site-visit-end-datetext"></span>\
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 16" width="14" height="16">\
							<path d="M12 2h-1V1c0-0.55-0.45-1-1-1S9 0.45 9 1v1H5V1c0-0.55-0.45-1-1-1S3 0.45 3 1v1H2C0.9 2 0 2.9 0 4v10c0 1.1 0.9 2 2 2h10c1.1 0 2-0.9 2-2V4C14 2.9 13.1 2 12 2zM12 15H2c-0.55 0-1-0.45-1-1V6h12v8C13 14.55 12.55 15 12 15z"/>\
							<rect x="3" y="8" width="2" height="2"/><rect x="6" y="8" width="2" height="2"/>\
							<rect x="9" y="8" width="2" height="2"/><rect x="3" y="11" width="2" height="2"/>\
							<rect x="6" y="11" width="2" height="2"/><rect x="9" y="11" width="2" height="2"/>\
						</svg>\
					</div>\
				</div>\
				<ul>';

				$.each(prsearchPeriod, function(k,v){
					var checkbtactive = (k==0) ? 'check-button-active' : '';
					prSearch_str = prSearch_str + '\
							<li class="check-button '+checkbtactive+'">\
								<span class="check-label-click" data-period="'+v+'">'+$.lang[LANG]['shopping.dashboard.list.searchModal.schPeriod.'+v]+'</span>\
							</li>';
				});	

		prSearch_str = prSearch_str + '\
				</ul>\
				<h3 class="sub-order-title">'+$.lang[LANG]['shopping.dashboard.list.searchModal.search.word']+'</h3>';

		prSearch_str = prSearch_str + '\
				<div class="cl-s-popup-selectbox">\
					<div class="cl-s-popup-selectboxWrap common-selectbox">\
						<select class="selectpicker dropdown" id="prSearch-info" name="selector">\
							<option value="">'+$.lang[LANG]['shopping.dashboard.list.searchModal.searchop.placeholder']+'</option>';

					$.each(prsearchWord, function(k,v){
						prSearch_str = prSearch_str + '\
							<option value="'+v+'" >'+$.lang[LANG]['shopping.dashboard.list.searchModal.searchop.'+v]+'</option>';
					});					
		prSearch_str = prSearch_str + '\
						</select>\
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 4" width="8" height="4"><polygon points="0 0 4 4 8 0 "></polygon></svg>\
					</div>\
					<input type="text" class="middle-input search_text" name="search_text">\
				</div>\
			</form>\
			';

	if(page_check.indexOf('order') != -1) searchtitle = 'order';
	else if(page_check.indexOf('cancel') != -1) searchtitle = 'cancel';
	else if(page_check.indexOf('exchange') != -1) searchtitle = 'exchange';
	else if(page_check.indexOf('return') != -1) searchtitle = 'return';

	var productSearch = $(this).showModalFlat($.lang[LANG]['shopping.dashboard.list.searchModal.title.'+searchtitle], prSearch_str,true,true,function () {
				var f = document.search_form;
				f.submit();
				
				productSearch.modal('hide');
			},'close','검색하기','cl-s-productSearch cl-cmmodal cl-s-btn cover', false, '', function() {
				// console.log('show callback');
				$('#prSearch-info').selectpicker();
			var dpOptions = {
				format: 'YYYY-MM-DD',
				useCurrent: false,
				focusOnShow: false,
				widgetPositioning: {
					horizontal: 'auto',
					vertical: 'bottom'
				},
				locale: LANG,
				ignoreReadonly: true,
				keepOpen: true,
				keyBinds: {
					up: function (widget) {
						return; 
					},
					down: function (widget) {
						return; 
					},
					'control up': function (widget) {
						return; 
					},
					'control down': function (widget) {
						return; 
					},
					left: function (widget) {
						return; 
					},
					right: function (widget) {
						return; 
					},
					pageUp: function (widget) {
						return; 
					},
					pageDown: function (widget) {
						return; 
					},
					enter: function () {
						return; 
					},
					escape: function () {
						return; 
					},
					'control space': function (widget) {
						return; 
					},
					t: function () {
						return; 
					},
					'delete': function () {
						return; 
					}
				},
			};

			var today = moment(new Date()).format('YYYY-MM-DD 23:59:59'),
				end_date = today,
				start_date = moment(new Date()).format('YYYY-MM-DD 00:00:00'),
				start_datetext = start_date.split(' ')[0],
				end_datetext = end_date.split(' ')[0];

			if ($("#site-visit-start").val() == '') {
				$("#site-visit-start").val(start_date);
				$("#site-visit-end").val(end_date);
				$('#site-visit-start-datetext').text(start_datetext);
				$('#site-visit-end-datetext').text(end_datetext);
			}
			
			$('#site-visit-start').datetimepicker( dpOptions );	
			$('#site-visit-end').datetimepicker( dpOptions );

			$("#site-visit-start").on("dp.change", function (e) {
				$('#site-visit-end').data("DateTimePicker").minDate(e.date);
				$('#site-visit-start-datetext').text($('#site-visit-start').val());
			});

			$("#site-visit-end").on("dp.change", function (e) {
				$('#site-visit-start').data("DateTimePicker").maxDate(e.date);
				$('#site-visit-end-datetext').text($('#site-visit-end').val());
			});

			$(".check-label-click").click(function (e) {
				var periodText = $(this).attr('data-period'),						
					end = moment(new Date()).format('YYYY-MM-DD');

				$(".check-button").each(function () {
					$(this).removeClass("check-button-active").removeClass("check-none-borderR");
				});

				$(this).parent().addClass("check-button-active");
				$(this).parent().prev().addClass("check-none-borderR");
				switch(periodText) {
					case "today" : 
						start = moment(new Date()).format('YYYY-MM-DD');
						break;

					case "1week" :
					   	var start = moment(new Date()).add('-6','days').format('YYYY-MM-DD');
						break;
					case "1mon" :
						var start = moment(new Date()).add('-1','month').format('YYYY-MM-DD');
				   	 	break;
					case "3mon" :
						var start = moment(new Date()).add('-3','month').format('YYYY-MM-DD');
						break;
					case "6mon" :
						var start = moment(new Date()).add('-6','month').format('YYYY-MM-DD');
						break;
					case "1year" :
						var start = moment(new Date()).add('-1','year').format('YYYY-MM-DD');
						break;
					default:
						break;
				}

				$('#site-visit-start').val(start);
				$('#site-visit-end').val(end);
				$('#site-visit-start-datetext').text(start);
				$('#site-visit-end-datetext').text(end);

			});

			$('#product-plus-button').attr({
				'data-startDate':$('#site-visit-start').val(),
				'data-endDate':$('#site-visit-end').val(),
				'data-selector':$('#prSearch-info option:selected').val(),
				'data-searchText':$('input[name="search_text"]').val()
			});
		});
}

function settingWay (val) {
	var mobile = (window.innerWidth<768) ? 'm.' : '',
		str = '\
			<div class="guide-top">\
				<h3 class="modal-title guidetitle">'+$.lang[LANG]['dashboard.socialLogin.'+val+'.guide.title']+'</h3>\
				<div class="guide-menu">\
					<ul>';
					for (var i=0;i<3;i++) {
						var menuactive = (i==0) ? 'active' : '';
						str = str + '<li class="hand '+menuactive+'">';
						if(i==2) str = str + '<div class="line left"></div>';
						else if(i==1) {
							str = str +'\
								<div class="line left"></div>\
								<div class="line right"></div>\
							';	
						}
						str = str + '<p>'+$.lang[LANG]['dashboard.socialLogin.'+val+'.guide.step.'+mobile+i]+'</p>';
						if(i==0) str = str + '<div class="line right"></div>';
						str = str + '</li>';
					};
		str +=	'\
					</ul>\
				</div>\
			</div>\
			<div class="guide-wrap">\
				<div class="step">\
			';

	if(val=='naver') {
		str += '\
					<div id="step1">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.title']+'</h3>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img01_1.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img01_2.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.2.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img01_3.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.3.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img01_4.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.4.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img01_5.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.5.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.5.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.5.3.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.5.4.contents']+'</li>\
						</ul>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img01_6.jpg">\
						<ul class="socialLoginSmallStep mb-0">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.6.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.6.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.6.3.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.1.6.4.contents']+'</li>\
						</ul>\
					</div>\
					<div id="step2">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.2.title']+'</h3>\
					 	<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img02_1.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.2.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img02_2.jpg">\
						<ul class="socialLoginSmallStep mb-0">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.2.2.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.2.2.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.2.2.3.contents']+'</li>\
						</ul>\
					</div>\
					<div id="step3">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.title']+'</h3>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img03_1.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img03_2.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.2.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img03_3.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.3.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img03_4.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.3.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.4.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.5.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.6.contents']+'</li>\
						</ul>\
						<p class="subDetail">'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.2.imgContents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img03_5.jpg">\
					 	<p class="subDetail mt50">'+$.lang[LANG]['dashboard.socialLogin.naver.guide.step.3.4.4.imgContents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/naver/nsl_img03_6.jpg">\
					</div>\
				';
	} else if (val=='kakao') {
		str += '\
					<div id="step1">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.1.title']+'</h3>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img1_01.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.1.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img1_02.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.1.2.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img1_03.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.1.3.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img1_04.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.1.4.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img1_05.jpg">\
						<p class="mb-0">'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.1.5.contents']+'</p>\
					</div>\
					<div id="step2">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.title']+'</h3>\
					 	<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_01.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_02.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.2.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_03.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.3.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_04.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.4.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.4.2.contents']+'</li>\
						</ul>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_05.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.5.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_06.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.6.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.6.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.6.3.contents']+'</li>\
						</ul>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_07.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.7.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_08.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.8.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.8.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.8.3.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.8.4.contents']+'</li>\
						</ul>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img2_09.jpg">\
						<p class="mb-0">'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.2.9.contents']+'</p>\
					</div>\
					<div id="step3">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.3.title']+'</h3>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img3_01.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.3.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/kakao/ksl_img3_02.jpg">\
						<ul class="socialLoginSmallStep mb-0">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.3.2.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.3.2.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.kakao.guide.step.3.2.3.contents']+'</li>\
						</ul>\
					</div>\
				';
	} else if (val=='google') {
		str += '\
					<div id="step1">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.1.title']+'</h3>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img01_1.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.1.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img01_2.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.1.2.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img01_3.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.1.3.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img01_4.jpg">\
						<p class="mb-0">'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.1.4.contents']+'</p>\
					</div>\
					<div id="step2">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.title']+'</h3>\
					 	<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img02_1.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.1.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.1.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.1.3.contents']+'</li>\
						</ul>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img02_2.jpg">\
						<ul class="socialLoginSmallStep">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.2.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.2.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.2.3.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.2.4.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.2.5.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.2.6.contents']+'</li>\
						</ul>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img02_3.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.3.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img02_4.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.4.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img02_5.jpg">\
						<ul class="socialLoginSmallStep mb-0">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.5.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.5.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.5.3.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.5.4.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.2.5.5.contents']+'</li>\
						</ul>\
					</div>\
					<div id="step3">\
						<h3>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.3.title']+'</h3>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img03_1.jpg">\
						<p>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.3.1.contents']+'</p>\
						<img class="img-responsive" src="//storage.googleapis.com/i.addblock.net/shopping_mall/social_login/google/gsl_img03_2.jpg">\
						<ul class="socialLoginSmallStep mb-0">\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.3.2.1.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.3.2.2.contents']+'</li>\
							<li>'+$.lang[LANG]['dashboard.socialLogin.google.guide.step.3.2.3.contents']+'</li>\
						</ul>\
					</div>\
				';
	}
	str += '\
				</div>\
				<div class="modal-footer guideClose">\
					<button type="button" class="btn btn-default btn-sm close-button-dialog clostbtnfalse" data-dismiss="modal">닫기</button>\
				</div>\
			</div>\
			';
											
	var shopguideModal = $(this).showModalFlat('',str,true,false,'','close','','guidePopup cl-cmmodal cl-s-btn cover w700 sclogin-modal', false ,'',function() {
		$(window).resize(function () {
			var mobile = (window.innerWidth<768) ? 'm.' : '';

			$('.sclogin-modal .guide-menu li').each(function(i) {
				$(this).find('p').text($.lang[LANG]['dashboard.socialLogin.'+val+'.guide.step.'+mobile+i]);
			});
		});
		$.guidePopup.scrollevent();
	});
}


function noBankData (shoppingUrl) {
	var f = document.no_bank_form;

	if (!f) alert('잘못된 요청방식입니다.');

	if (confirm('정말로 입금 확인 처리를 하시겠습니까?') === true) {
		var orderGroup = f.order_group.value;
		$.ajax({
			url: shoppingUrl+'/no_bank_update',
			type: 'post',
			data: {'order_group': orderGroup},
			success: function (data) {
				location.reload();
			}
		});
	}

	return false;
}

function checkCancel (f) {
	var f = document.cancel_form;
	if (f.requests.value == '') {
		return false;
	}

	return true;
}

function deliverySearchClick (com, num) {
	var url = '';
	var regExp = /[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;
	num = num.replace(regExp, "");
	if (com == 'cj') {
		url = 'https://www.doortodoor.co.kr/parcel/doortodoor.do?fsp_action=PARC_ACT_002&fsp_cmd=retrieveInvNoACT&invc_no='+num;
	} else if (com == 'hj') {
		url = 'https://www.hanjin.co.kr/delivery_html/inquiry/result_waybill.jsp?wbl_num='+num;
	} else if (com == 'lt') {
		url = 'https://www.lotteglogis.com/open/tracking?invno='+num;
	} else if (com == 'pt') {
		url = 'http://service.epost.go.kr/trace.RetrieveRegiPrclDeliv.postal?sid1='+num;
	} else if (com == 'lg') {
		url = 'https://www.ilogen.com/web/personal/trace/'+num;
	} else if (com == 'cv') {
		url = 'https://www.cvsnet.co.kr/reservation-inquiry/delivery/index.do?dlvry_type=domestic&srch_type=01&invoice_no='+num;
	} else if (com == 'cu') {
		url = 'https://www.doortodoor.co.kr/jsp/cmn/TrackingCUpost.jsp?pTdNo='+num;
	} else if (com == 'ems') {
		url = 'https://service.epost.go.kr/trace.RetrieveEmsRigiTraceList.comm?POST_CODE='+num+'&displayHeader=N';
	} else if (com == 'etc') {
		alert('자가배송 상품입니다.\n관리자에게 문의해 주세요.');
		return false;
	}
	window.open(url, '', 'width=1250,height=600');
}

function shoppingFormPaging (num) {
	var location = window.location.href;

	shoppingUrl = (location.indexOf('_admin') != -1) ? '/_admin/shopping' : '/shopping';
	
	var f = document.point_search;

	f.page.value = num;

	f.submit();
}
